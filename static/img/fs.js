(function(){var v=this&&this.__awaiter||function(a,l,k,f){return new (k||(k=Q))(function(d,c){function b(a){try{h(f.next(a))}catch(b){c(b)}}function e(a){try{h(f["throw"](a))}catch(b){c(b)}}function h(a){a.done?d(a.value):(new k(function(b){b(a.value)})).then(b,e)}h((f=f.apply(a,l||[])).next())})},z=this&&this.__generator||function(a,l){function k(a){return function(b){return f([a,b])}}function f(g){if(c)throw new TypeError("Generator is already executing.");for(;d;)try{if(c=1,b&&(e=b[g[0]&2?"return":
g[0]?"throw":"next"])&&!(e=e.call(b,g[1])).done)return e;if(b=0,e)g=[0,e.value];switch(g[0]){case 0:case 1:e=g;break;case 4:return d.label++,{value:g[1],done:!1};case 5:d.label++;b=g[1];g=[0];continue;case 7:g=d.ops.pop();d.trys.pop();continue;default:if(!(e=d.trys,e=0<e.length&&e[e.length-1])&&(6===g[0]||2===g[0])){d=0;continue}if(3===g[0]&&(!e||g[1]>e[0]&&g[1]<e[3])){d.label=g[1];break}if(6===g[0]&&d.label<e[1]){d.label=e[1];e=g;break}if(e&&d.label<e[2]){d.label=e[2];d.ops.push(g);break}e[2]&&d.ops.pop();
d.trys.pop();continue}g=l.call(a,d)}catch(h){g=[6,h],b=0}finally{c=e=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}var d={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},c,b,e,h;return h={next:k(0),"throw":k(1),"return":k(2)},"function"===typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},A=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,k){a.__proto__=k}||function(a,k){for(var f in k)k.hasOwnProperty(f)&&
(a[f]=k[f])};return function(l,k){function f(){this.constructor=l}a(l,k);l.prototype=null===k?Object.create(k):(f.prototype=k.prototype,new f)}}(),R=this&&this.__assign||Object.assign||function(a){for(var l,k=1,f=arguments.length;k<f;k++){l=arguments[k];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])}return a},m;(function(a){var l;a.Namespace=function(a){if(!l){var f=a._fs_loaded;l=f?f:a._fs_namespace?a._fs_namespace:"FS"}return l};a.isLoaded=function(a){return a._fs_loaded};
a.setLoaded=function(a,f){a._fs_loaded=f;f in a||(a[f]={})}})(m||(m={}));(function(a){a._fs_debug=function(a){return!!a._fs_ext_debug||!!a._fs_debug};a._fs_host=function(a){return a._fs_ext_host||a._fs_host};a._fs_org=function(a){return a._fs_ext_org||a._fs_org};a._fs_csp=function(a){return a._fs_csp};a._fs_cookie_domain=function(a){return a._fs_cookie_domain};a._fs_ready=function(a){return a._fs_ready};a._fs_run_in_iframe=function(a){return!!a._fs_run_in_iframe};a._fs_is_outer_script=function(a){return!!a._fs_is_outer_script};
a._fs_replay_flags=function(a){return a._fs_replay_flags};a._fs_transport=function(a){return a._fs_transport};a.set_fs_shutdown=function(a,k){a._fs_shutdown=k};a.FS_q_drain=function(l){if((l=l[a.Namespace(l)])&&"q"in l){var k=l.q;delete l.q;return k}return[]};a.FS_q_push=function(l,k){var f=l[a.Namespace(l)];"q"in f||(f.q=[]);f.q.push(k)}})(m||(m={}));(function(a){a.CompiledTimestamp=1534182067;a.CompiledVersion="UNSET"})(m||(m={}));(function(a){function l(){var b,e;try{throw Error("");}catch(n){b=
"<generated>\n",e=n.stack||n.backtrace||n.stacktrace}if(!e){b="<generated-ie>\n";e=[];try{for(var p=arguments.callee.caller.caller;p&&e.length<f;){var x=c.test(p.toString())?RegExp.$1||d:d;e.push(x);p=p.caller}}catch(k){a.logIfDebug(k)}e=e.join("\n")}return b+e}function k(c,e,d){if(!(0>=b)){b--;"string"==typeof c&&(c=Error(c));var p=a.getCookies(document).fs_uid;(p=p?a.parseIdentityCookie(p):void 0)&&p.OrgId!=a._fs_org(window)&&(p=void 0);var f=Date.now(),k=(new Date(1E3*a.CompiledTimestamp)).toISOString(),
s=window.location.origin,q;try{q=window.self!==window.top}catch(t){q=!0}c={projectRoot:s,deviceTime:f,inIframe:q,CompiledTimestamp:a.CompiledTimestamp,CompiledTime:k,orgId:a._fs_org(window),"userId:sessionId":p?p.UserId+":"+p.SessionId:"NA",context:document.location.pathname,message:c.message,name:"Recording Error",releaseStage:"production "+k,severity:e,language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:c.stack||(c.backtrace||c.stacktrace)||l()};if(d)for(var u in d)c["aux_"+
u]=d[u];d=[];for(u in c)d.push(encodeURIComponent(u)+"="+encodeURIComponent(c[u]));(new Image).src="https://"+a.gceHost(window._fs_host)+"/rec/except?"+d.join("&")}}var f=10,d="[anonymous]",c=/function\s*([\w\-$]+)?\s*\(/i;a.generateStacktrace=l;var b=15;a.sendToBugsnag=k;var e={};a.assert=function(a,b,c){void 0===c&&(c=1);if(a)return!0;e[b]=e[b]||0;e[b]++;if(e[b]>c)return!1;k(Error("Assertion failed: "+b),"error");return a}})(m||(m={}));(function(a){function l(){var a=0,b=new M(d),c=document.createTextNode("");
b.observe(c,{characterData:!0});return function(){var b=a=++a%2;c.data=b+""}}function k(){var a=new MessageChannel;a.port1.onmessage=d;return function(){return a.port2.postMessage(0)}}function f(){var a=setTimeout;return function(){return a(d,1)}}function d(){for(var a=0;a<E;a+=2)(0,I[a])(I[a+1]),I[a]=void 0,I[a+1]=void 0;E=0}function c(a,b){var c=arguments,g=this,h=new this.constructor(e);void 0===h[L]&&m(h);var d=g._state;d?function(){var a=c[d-1];F(function(){return G(d,h,a,g._result)})}():u(g,
h,a,b);return h}function b(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(e);r(b,a);return b}function e(){}function h(a){try{return a.then}catch(b){return J.error=b,J}}function g(a,b,c,e,g){try{a.call(b,c,e)}catch(h){return h}}function n(a,b,c){F(function(a){var e=!1,h=g(c,b,function(c){e||(e=!0,b!==c?r(a,c):q(a,c))},function(b){e||(e=!0,t(a,b))},"Settle: "+(a._label||" unknown promise"));!e&&h&&(e=!0,t(a,h))},a)}function p(a,b){b._state===z?q(a,b._result):b._state===A?
t(a,b._result):u(b,void 0,function(b){return r(a,b)},function(b){return t(a,b)})}function x(a,e,g){e.constructor===a.constructor&&g===c&&e.constructor.resolve===b?p(a,e):g===J?(t(a,J.error),J.error=null):void 0===g?q(a,e):"function"===typeof g?n(a,e,g):q(a,e)}function r(a,b){a===b?t(a,new TypeError("You cannot resolve a promise with itself")):"function"===typeof b||"object"===typeof b&&null!==b?x(a,b,h(b)):q(a,b)}function s(a){a._onerror&&a._onerror(a._result);w(a)}function q(a,b){a._state===v&&(a._result=
b,a._state=z,0!==a._subscribers.length&&F(w,a))}function t(a,b){a._state===v&&(a._state=A,a._result=b,F(s,a))}function u(a,b,c,e){var g=a._subscribers,h=g.length;a._onerror=null;g[h]=b;g[h+z]=c;g[h+A]=e;0===h&&a._state&&F(w,a)}function w(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var e,g,h=a._result,d=0;d<b.length;d+=3)e=b[d],g=b[d+c],e?G(c,e,g,h):g(h);a._subscribers.length=0}}function y(){this.error=null}function G(a,b,c,e){var g="function"===typeof c,h,d,n,p;if(g){try{h=c(e)}catch(f){D.error=
f,h=D}h===D?(p=!0,d=h.error,h.error=null):n=!0;if(b===h){t(b,new TypeError("A promises callback cannot return that same promise."));return}}else h=e,n=!0;b._state===v&&(g&&n?r(b,h):p?t(b,d):a===z?q(b,h):a===A&&t(b,h))}function C(a,b){try{b(function(b){r(a,b)},function(b){t(a,b)})}catch(c){t(a,c)}}function m(a){a[L]=N++;a._state=void 0;a._result=void 0;a._subscribers=[]}function K(a,b){this._instanceConstructor=a;this.promise=new a(e);this.promise[L]||m(this.promise);O(b)?(this._input=b,this._remaining=
this.length=b.length,this._result=Array(this.length),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&q(this.promise,this._result))):t(this.promise,Error("Array Methods must be provided an Array"))}var H=void 0,O=H=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},E=0,F=function(a,b){I[E]=a;I[E+1]=b;E+=2;2===E&&P()},M=window.MutationObserver||window.WebKitMutationObserver,H="undefined"!==
typeof Uint8ClampedArray&&void 0!=typeof self&&"undefined"!==typeof self.importScripts&&"undefined"!==typeof MessageChannel,I=Array(1E3),P;P=M?l():H?k():f();var L=Math.random().toString(36).substring(16),v=void 0,z=1,A=2,J=new y,D=new y,N=0;K.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===v&&c<a;c++)this._eachEntry(b[c],c)};K.prototype._eachEntry=function(a,g){var d=this._instanceConstructor,n=d.resolve;n===b?(n=h(a),n===c&&a._state!==v?this._settledAt(a._state,
g,a._result):"function"!==typeof n?(this._remaining--,this._result[g]=a):d===B?(d=new d(e),x(d,a,n),this._willSettleAt(d,g)):this._willSettleAt(new d(function(b){return b(a)}),g)):this._willSettleAt(n(a),g)};K.prototype._settledAt=function(a,b,c){var e=this.promise;e._state===v&&(this._remaining--,a===A?t(e,c):this._result[b]=c);0===this._remaining&&q(e,this._result)};K.prototype._willSettleAt=function(a,b){var c=this;u(a,void 0,function(a){return c._settledAt(z,b,a)},function(a){return c._settledAt(A,
b,a)})};var B=function(a){this[L]=N++;this._result=this._state=void 0;this._subscribers=[];if(e!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof B)C(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}};B.all=function(a){return(new K(this,a)).promise};B.race=function(a){var b=this;return O(a)?
new b(function(c,e){for(var g=a.length,h=0;h<g;h++)b.resolve(a[h]).then(c,e)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};B.resolve=b;B.reject=function(a){var b=new this(e);t(b,a);return b};B._setAsap=function(a){F=a};B._asap=F;B.prototype={constructor:B,then:c,"catch":function(a){return this.then(null,a)}};a.Promise="function"==typeof window.Promise?window.Promise:B})(m||(m={}));var Q=m.Promise;(function(a){var l=navigator.userAgent;a.uaIsIE=-1<l.indexOf("MSIE ")||
-1<l.indexOf("Trident/");a.uaIsIE11=a.uaIsIE&&-1<l.indexOf("rv:11");a.uaIsEdge=-1<l.indexOf("Edge/")})(m||(m={}));(function(a){function l(a){var f=[function(){throw Error("");},Function.prototype.toString].map(function(a){try{a.call(null)}catch(b){return b.stack||""}}),d=f[0],f=f[1];if(!d||!f)return!1;for(var c=Math.min(d.length,f.length),b=1,e=b;e<c;e++){var h=d.charCodeAt(d.length-e),g=f.charCodeAt(f.length-e);if(h!=g)break;if(10==g||e==c-1)b=e}if(f.slice(0,f.length-b+1).match(/\.js:\d+([:)]|$)/m))return!1;
d=function(a){return"function"!==typeof a?!1:0>Function.prototype.toString.call(a).indexOf("[native code]")};return!d(a.JSON.parse)&&!d(a.JSON.stringify)&&!d(a.Array)&&!d(a.Array.prototype.shift)&&!d(a.Array.isArray)&&!d(a.Object.prototype.toString)&&!d(a.Object.keys)&&!d(a.Object.values)&&!d(a.Object.prototype.hasOwnProperty)&&!d(a.setTimeout)&&!d(a.setInterval)&&!d(a.clearTimeout)&&!d(a.clearInterval)}a.initWindex=function(k){try{if(a.uaIsIE||a.uaIsEdge||l(k))return a.windex.done=!0,a.Promise.resolve();
if(!k.document||a.windex.done)return a.Promise.resolve();a.logIfDebug("Window object doesn't look clean; creating windex.");var f=k.document.createElement("iframe");f.id="FullStory-iframe";f.className="fs-hide";f.style.display="none";var d=k.document.body||k.document.head||k.document.documentElement||k.document;try{d.appendChild(f)}catch(c){return a.Promise.resolve()}f.src="about:blank";if(!f.contentWindow)return a.Promise.resolve();var b={done:!0,jsonParse:f.contentWindow.JSON.parse,jsonStringify:f.contentWindow.JSON.stringify,
arrayShift:a.unbind(f.contentWindow.Array.prototype.shift),arrayIsArray:f.contentWindow.Array.isArray,objectToString:a.unbind(f.contentWindow.Object.prototype.toString),objectKeys:f.contentWindow.Object.keys,objectValues:f.contentWindow.Object.values,objectHasOwnProp:a.unbind(f.contentWindow.Object.prototype.hasOwnProperty),matchMedia:f.contentWindow.matchMedia?a.unbind(f.contentWindow.matchMedia):null,setWindowTimeout:a.unbind(f.contentWindow.setTimeout),setWindowInterval:a.unbind(f.contentWindow.setInterval),
clearWindowTimeout:a.unbind(f.contentWindow.clearTimeout),clearWindowInterval:a.unbind(f.contentWindow.clearInterval)};f.parentNode&&f.parentNode.removeChild(f);var e,h=new a.Promise(function(a){return e=a});setTimeout(function(){try{b.jsonParse("[]").push(0),a.windex=b}catch(c){a.windex.done=!0}e()});return h}catch(g){return a.sendToBugsnag(g,"error"),a.Promise.resolve()}}})(m||(m={}));(function(a){function l(){var a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector,
b=window.document?window.document.documentElement:void 0;!b||a&&b instanceof window.Element||(a=b.matches||b.msMatchesSelector||b.webkitMatchesSelector);return[a,function(b,c){return a.call(b,c)}]}function k(b){return a.windex.objectValues(b||{})}function f(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function d(a){p&&window.console&&console.log(a)}function c(a){var b="Internal error: unable to determine what JSON error was";try{b=""+a,b=b.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(c){}return'"'+
b+'"'}function b(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a}function e(a){return"localhost"==a||"127.0.0.1"==a}function h(a,b,c,e){void 0!==c&&("function"==typeof a.addEventListener?a.addEventListener(b,c,e):"function"==typeof a.addListener?a.addListener(c):d("Target of "+b+" doesn't seem to support listeners"))}function g(a,b,c,e){void 0!==c&&("function"==typeof a.removeEventListener?a.removeEventListener(b,c,e):"function"==typeof a.removeListener?a.removeListener(c):d("Target of "+
b+" doesn't seem to support listeners"))}function n(a){return function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];return a.apply(b,c)}}var p=!1;a.windex={done:!1,jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayShift:n(Array.prototype.shift),arrayIsArray:Array.isArray,objectToString:n(Object.prototype.toString),objectKeys:Object.keys,objectValues:Object.values,objectHasOwnProp:n(Object.prototype.hasOwnProperty),matchMedia:window.matchMedia?n(window.matchMedia):null,setWindowTimeout:n(setTimeout),
setWindowInterval:n(setInterval),clearWindowTimeout:n(clearTimeout),clearWindowInterval:n(clearInterval)};a.BAD_APP_IDS=" 0 1 -1 true false n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");a._native_bind=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];return a.bind.apply(a,[b].concat(c))};a._js_bind=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];return function(){var e=Array.prototype.slice.call(arguments);a.call.apply(a,
[b].concat(c,e))}};a.bind=Function.prototype.bind?a._native_bind:a._js_bind;a._native_map=function(a,b,c){return a.map(b,c)};a._js_map=function(a,b,c){for(var e=Array(a.length),g=0;g<a.length;g++)e[g]=b.call(c,a[g],g,a);return e};a.map=Array.prototype.map?a._native_map:a._js_map;a._native_trim=function(a){return a.trim()};a._js_trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.trim=String.prototype.trim?a._native_trim:a._js_trim;a._native_filter=function(a,b,c){return a.filter(b,
c)};a._js_filter=function(a,b,c){for(var e=Array(a.length),g=0;g<a.length;g++)e[g]=b.call(c,a[g],g,a);return e};a.filter=Array.prototype.filter?a._native_filter:a._js_filter;var x=function(b){return a.windex.arrayIsArray(b)},r=function(b){return"[object Array]"==a.windex.objectToString.call(b)};a.isArray=a.windex.arrayIsArray?x:r;a._native_keys=function(b){return a.windex.objectKeys(b)};a._js_keys=function(b){var c=[],e;for(e in b)a.windex.objectHasOwnProp(b,e)&&c.push(e);return c};a.keys="function"==
typeof a.windex.objectKeys?a._native_keys:a._js_keys;a.setUpMatchesSelector=l;x=l();a._native_matchesSelector=x[0];a.matchesSelector=x[1];a.prefix=function(a,b){return 0==a.lastIndexOf(b,0)};a.forIn=function(b,c){for(var e in b)a.windex.objectHasOwnProp(b,e)&&c(b[e],e,b)};a.forInAsync=function(b,c){return v(this,void 0,void 0,function(){var e,g,h,d;return z(this,function(n){switch(n.label){case 0:e=[];for(g in b)e.push(g);h=0;n.label=1;case 1:if(!(h<e.length))return[3,4];d=e[h];return a.windex.objectHasOwnProp(b,
d)?[4,c(b[d],d,b)]:[3,3];case 2:n.sent(),n.label=3;case 3:return h++,[3,1];case 4:return[2]}})})};a.firstKey=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return b};a.firstValue=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};a.hasNKeys=function(a,b){var c=0,e;for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&++c>b)return!1;return c==b};a.hasMoreThanNKeys=function(a,b){var c=0,e;for(e in a)if(Object.prototype.hasOwnProperty.call(a,
e)&&++c>b)return!0;return!1};x=function(a){var b=a.nextSibling;return b&&a.parentNode&&b===a.parentNode.firstChild?null:b};r=function(a){return a.nextSibling};a.nextSibling=a.uaIsIE?x:r;x=function(a,b){if(a){var c=a.parentNode?a.parentNode.firstChild:null;do b(a),a=a.nextSibling;while(a&&a!=c)}};r=function(a,b){for(;a;a=a.nextSibling)b(a)};a.forEachNextSibling=a.uaIsIE?x:r;x=function(a){var b=a.previousSibling;return b&&a.parentNode&&b===a.parentNode.lastChild?null:b};r=function(a){return a.previousSibling};
a.previousSibling=a.uaIsIE?x:r;a._native_values=k;a._js_values=f;a.values=a.windex.objectValues?k:f;a.$entry=function(a,b){var c=function(){try{return a.apply(b||this,arguments)}catch(c){}};return window.Zone&&window.Zone.root&&"function"==typeof window.Zone.root.wrap?window.Zone.root.wrap(c):c};a.initDebug=function(b){p=a._fs_debug(b)};a.isDebug=function(){return p};a.logIfDebug=d;a.stringify=function(b){var e=Array.prototype.toJSON,g=String.prototype.toJSON;e&&(Array.prototype.toJSON=void 0);g&&
(String.prototype.toJSON=void 0);var h;try{h=a.windex.jsonStringify(b)}catch(d){h=c(d)}finally{e&&(Array.prototype.toJSON=e),g&&(String.prototype.toJSON=g)}return h};a.jsonErrorString=c;a.doctypeString=function(a){a=a.doctype;if(!a)return"";var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(b){return a.windex.jsonParse(b)};a.domainFromHost=b;a.isLocalhost=e;a.gceHost=function(a){return e(b(a))?a:0==a.indexOf("www.")||
0==a.indexOf("app.")?"rs."+a.slice(4):"rs."+a};a.isIP=function(a){return!!a.match(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/g)};a.isChrome=function(){var a=window.chrome,b=window.navigator,c=b.vendor,e="undefined"!==typeof window.opr,g=-1<b.userAgent.indexOf("Edge");return b.userAgent.match("CriOS")?!0:!a||"Google Inc."!==c||e||g?!1:!0};a.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)};a.tryGetScreenDims=function(a){var b=0,c=0;if(null==a.screen)return[b,
c];b=parseInt(String(a.screen.width));c=parseInt(String(a.screen.height));b=isNaN(b)?0:b;c=isNaN(c)?0:c;return[b,c]};a._trustEventOverride="_fs_trust_event";x=function(){function b(){var a=this;this._listeners=[];this._children=[];this._yesCapture=!0;this._noCapture=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a._yesCapture={capture:!0,passive:!0};a._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",function(){},c)}catch(e){}}b.prototype.add=function(b,c,e,g,n){void 0===
n&&(n=!1);e={target:b,type:c,fn:function(b){try{(n||!1!==b.isTrusted||"message"==c||b[a._trustEventOverride])&&g(b)}catch(e){d("Error in event listener: "+e)}},options:e?this._yesCapture:this._noCapture,index:this._listeners.length};this._listeners.push(e);h(b,c,e.fn,e.options);return e};b.prototype.remove=function(a){a.target&&(g(a.target,a.type,a.fn,a.options),a.target=null,a.fn=void 0)};b.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);
this._listeners=[]};b.prototype.createChild=function(){var a=new b;this._children.push(a);return a};b.prototype.refresh=function(){for(var a=0,b=this._listeners;a<b.length;a++){var c=b[a];c.target&&(g(c.target,c.type,c.fn,c.options),h(c.target,c.type,c.fn,c.options))}a=0;for(b=this._children;a<b.length;a++)b[a].refresh()};return b}();a.DomListeners=x;var s=function(){function b(a,c){this.target=a;this.propertyName=c;this.attached=this.on=!1;this.native=a[c]}b.prototype.before=function(a){this._before=
a;return this};b.prototype.afterAsync=function(a){this._afterAsync=a;return this};b.prototype.afterSync=function(a){this._afterSync=a;return this};b.prototype.disable=function(){this.on=!1;this.target[this.propertyName]==this.shim&&(this.target[this.propertyName]=this.native,this.attached=!1)};b.prototype.enable=function(){this.on=!0;if(!this.attached){this.shim||(this.shim=this.makeShim());try{this.target[this.propertyName]=this.shim}catch(a){return!1}this.attached=!0}return!0};b.prototype.makeShim=
function(){var b=this;return function(){var c={that:this,args:arguments};if(b.on)try{b._before&&b._before.call(this,c)}catch(e){d("Error in hook before "+b.propertyName)}var g=b.native.apply(this,arguments);if(b.on)try{if(b._afterSync&&b._afterSync.call(this,c),b._afterAsync){var h=this;a.windex.setWindowTimeout(window,function(){try{b._afterAsync.call(h,c)}catch(a){d("Error in async hook after "+b.propertyName)}},0)}}catch(n){d("Error in hook after "+b.propertyName)}return g}};return b}(),q={};a.activateHook=
function(a,b){if(!a||"function"!=typeof a[b])return null;q[b]=q[b]||[];for(var c,e=0;e<q[b].length;e++)q[b][e].obj==a&&(c=q[b][e].hook);c||(c=new s(a,b),q[b].push({obj:a,hook:c}));return c.enable()?c:null};a.tagName=function(a){return a.tagName?"object"==typeof a.tagName?"form":a.tagName.toLowerCase():null};a.parseIdentityCookie=function(b){var c="",e="",g="",h="",n="";if(b){var p=b.split("`");3>p.length?c=b:(g=p[0],h=p[1],c=p[2],5<=p.length&&(n=decodeURIComponent(p[3]),0<=a.BAD_APP_IDS.indexOf(n)&&
(d('ignoring invalid app key "'+n+'" from cookie.'),n="")))}b=c.indexOf(":");-1!=b&&(e=c.slice(b+1),c=c.slice(0,b));return{Host:g,OrgId:h,UserId:c,SessionId:e,AppKey:n}};a.getCookies=function(a){var b={};a=a.cookie.split(";");for(var c=0;c<a.length;c++){var e=a[c].replace(/^\s+|\s+$/g,"").split("=");b[e[0]]||(b[e[0]]=e[1])}return b};a.wait=function(b){return new a.Promise(function(c){a.windex.setWindowTimeout(window,function(){return c()},b)})};a.unbind=n;a.elemSheet=function(a){return a?a.sheet:
void 0};a.sheetRules=function(a){return a?a.cssRules||a.rules:void 0}})(m||(m={}));(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL_LAYOUT=10;a.EVENT_SCROLL_LAYOUT_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE_LAYOUT=19;a.EVENT_DOMLOADED=
20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_RESIZE_VISUAL=40;a.EVENT_RESIZE_VISUAL_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.EVENT_WATCHED_ELEM=56;a.PerfEntryTiming=
0;a.PerfEntryNavigation=1;a.PerfEntryResource=2;a.PerfEntryPaint=3;a.PerfEntryMark=4;a.PerfEntryMeasure=5;a.PerfEntryMemory=6;a.EVENT_PERF_ENTRY=57;a.RecFeaturePerformance=0;a.RecFeaturePerformanceEntries=1;a.RecFeaturePerformanceMemory=2;a.RecFeatureConsole=3;a.RecFeatureAjax=4;a.EVENT_REC_FEAT_SUPPORTED=58;a.EVENT_SELECT=59;a.RecStylesheetOwnerTypeNode=0;a.RecStylesheetOwnerTypeRule=1;a.EVENT_CSSRULE_INSERT=60;a.EVENT_CSSRULE_DELETE=61;a.ThrottledStyleSheetHooks=0;a.ThrottledSetPropertyHooks=1;
a.EVENT_FAIL_THROTTLED=62;a.EVENT_AJAX_REQUEST=63;a.EVENT_SCROLL_VISUAL_OFFSET=64;a.EVENT_SCROLL_VISUAL_OFFSET_CURVE=65;a.EVENT_MEDIA_QUERY_CHANGE=66;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_SYS_RESOURCEHASH=8195;a.EVENT_SYS_SETCONSENT=8196;a.EVENT_SYS_CUSTOM=8197;a.EVENT_COOKED_LOAD_MELTED="load-melted";a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS=
"focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.EVENT_FORM_ABANDONED="abandon";a.EVENT_COOKED_ELEM_SEEN="seen";a.EVENT_COOKED_REQUEST="request";a.EVENT_COOKED_LONG_CLICK="long_click";a.EVENT_COOKED_UNHANDLED_CLICK="unhandled_click";a.EVENT_COOKED_UNHANDLED_LONG_CLICK="unhandled_long_click";a.EVENT_COOKED_BACKGROUNDED="backgrounded";a.isUserActionEvent=function(l){switch(l){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL_LAYOUT:case a.EVENT_SCROLL_LAYOUT_CURVE:case a.EVENT_SCROLL_VISUAL_OFFSET:case a.EVENT_SCROLL_VISUAL_OFFSET_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};
a.MAX_LOGS_PER_PAGE=1024;a.AjaxBodyElide=0;a.AjaxBodyRecord=1;a.AjaxBodyWhitelist=2})(m||(m={}));(function(a){a.HighlightTypeFsId="fsidentity";a.HighlightTypeNewUid="newuid";a.UID_COOKIE="fs_uid";var l=function(){function k(a){void 0===a&&(a=document);this._doc=a;this._cookies={}}k.prototype.initFromCookies=function(f,d){this._cookies=a.getCookies(this._doc);this._cookie=a.parseIdentityCookie(this._cookies[a.UID_COOKIE]);if(this._cookie.Host.replace(/^www\./,"")!=f.replace(/^www\./,"")||this._cookie.OrgId!=
d)this._cookie={Host:f,OrgId:d,UserId:"",SessionId:"",AppKey:""}};k.prototype.initFromParsedCookie=function(a){this._cookie=a};k.prototype.clear=function(){var a=this.host(),d=this.orgId();this._cookie={Host:a,OrgId:d,UserId:"",SessionId:"",AppKey:""};this.write()};k.prototype.host=function(){return this._cookie.Host};k.prototype.orgId=function(){return this._cookie.OrgId};k.prototype.userId=function(){return this._cookie.UserId};k.prototype.sessionId=function(){return this._cookie.SessionId};k.prototype.appKey=
function(){return this._cookie.AppKey};k.prototype.cookieData=function(){return this._cookie};k.prototype.cookies=function(){return this._cookies};k.prototype.setCookie=function(a,d){var c=a+"="+d,c=this._domain?c+("; domain=."+encodeURIComponent(this._domain)):c+"; domain=";this._doc.cookie=c+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};k.prototype.setIds=function(f,d,c,b){if(a.isLocalhost(d)||a.isIP(d))d="";f=a._fs_cookie_domain(f);"string"==typeof f&&(d=f);this._domain=d;this._cookie.UserId=
c;this._cookie.SessionId=b;this.write()};k.prototype.clearAppId=function(){if(!this._cookie.AppKey)return!1;this._cookie.AppKey="";this.write();return!0};k.prototype.setAppId=function(a){this._cookie.AppKey=a;this.write()};k.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`");return a};k.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,
this.encode())};return k}();a.Identity=l})(m||(m={}));(function(a){var l=function(){function f(){this._due=0;this._id=f.nextId++}f.checkForBrokenSchedulers=function(){if(!a.uaIsIE11&&!f.checkOngoing){f.checkOngoing=!0;var d=Date.now();a.forIn(f.registry,function(a){a.maybeForceTick(d)});f.checkOngoing=!1}};f.stopAll=function(){a.forIn(this.registry,function(a){return a.stop()})};f.prototype.stop=function(){this.cancel();delete f.registry[this._id]};f.prototype.register=function(a){this._due=Date.now()+
2*a;f.registry[this._id]=this};f.prototype.unregister=function(){delete f.registry[this._id]};f.prototype.maybeForceTick=function(d){var c=this;d>this._due&&"function"==typeof requestAnimationFrame&&requestAnimationFrame(function(){var b=f.checkOngoing;try{f.checkOngoing=!0,c._tick()}catch(e){a.sendToBugsnag(e,"error")}finally{f.checkOngoing=b}})};f.registry={};f.nextId=0;f.checkOngoing=!1;return f}();a.Scheduler=l;var k=function(f){function d(a){var b=f.call(this)||this;b._interval=a;b._handle=-1;
return b}A(d,f);d.prototype.start=function(c){var b=this;-1==this._handle&&(this._tick=function(){try{c(),b.register(b._interval)}catch(e){a.sendToBugsnag(e,"error")}},this._handle=a.windex.setWindowInterval(window,this._tick,this._interval),this.register(this._interval))};d.prototype.cancel=function(){-1!=this._handle&&(a.windex.clearWindowInterval(window,this._handle),this._handle=-1,this._tick=function(){})};return d}(l);a.RealTicker=k;l=function(f){function d(c,b,e){void 0===b&&(b=0);for(var h=
[],g=3;g<arguments.length;g++)h[g-3]=arguments[g];var d=f.call(this)||this;d.delay=b;d.timer=-1;d._tick=function(){try{c.apply(void 0===e?window:e,h)}catch(b){a.sendToBugsnag(b,"error")}try{d.unregister()}catch(g){a.sendToBugsnag(g,"error")}};return d}A(d,f);d.prototype.start=function(c){void 0===c&&(c=this.delay);this.delay=c;a.windex.clearWindowTimeout(window,this.timer);this.timer=a.windex.setWindowTimeout(window,this._tick,this.delay);this.register(c);return this};d.prototype.cancel=function(){a.windex.clearWindowTimeout(window,
this.timer);this.timer=-1};return d}(l);a.RealTimeout=l;l=function(){function a(d,c,b){this.limit=d;this.breaker=b;this.remaining=0;this.ticker=new k(c);this.open()}a.prototype.guard=function(a){var c=this;return function(){if(0==c.remaining)c.breaker(),c.remaining--;else if(!(0>c.remaining))return c.remaining--,a.apply(this,arguments)}};a.prototype.close=function(){this.ticker.stop();return this};a.prototype.open=function(){var a=this;this.remaining=this.limit;this.ticker.start(function(){a.remaining=
a.limit});return this};return a}();a.Throttle=l;l=function(){function a(){this._startTime=this.wallTime()}a.prototype.wallTime=function(){return Date.now()};a.prototype.now=function(){return this.wallTime()-this._startTime};a.prototype.startTime=function(){return this._startTime};a.prototype.setStartTime=function(a){this._startTime=a};return a}();a.Timekeeper=l})(m||(m={}));(function(a){function l(b,c){var e={PayloadToSend:{},IsEmpty:!0,ValidationErrors:[]};a.forIn(c,function(a,c){var h=f(b,c,a,e.ValidationErrors);
if(h){var d=h.name,h=h.type;"obj"==h?(h=l(b,a),e.ValidationErrors=e.ValidationErrors.concat(h.ValidationErrors),h.IsEmpty||(e.PayloadToSend[d]=h.PayloadToSend,e.IsEmpty=!1)):("str"==h&&(a=a.trim()),"date"==h&&(a=(a.constructor===Date?a:new Date(a)).toISOString()),e.PayloadToSend[d]=a,e.IsEmpty&&(e.IsEmpty=!1))}});return e}function k(b,c){"number"==typeof b&&Math.floor(b)==b&&(a.logIfDebug("Expected appId of type 'string' instead got value: "+b+" of type: "+typeof b),b=""+b);if("string"!=typeof b)return a.logIfDebug("blocking FS.identify API call; uid value ("+
b+") must be a string"),[void 0,a.HighlightTypeFsId];var e=b.trim();if(0<=a.BAD_APP_IDS.indexOf(e.toLowerCase()))return a.logIfDebug("blocking FS.identify API call; uid value ("+b+") is illegal"),[void 0,a.HighlightTypeFsId];var h=void 0;c&&(c._cookie.AppKey&&c._cookie.AppKey!=e)&&(a.logIfDebug("user re-identified; existing uid ("+c._cookie.AppKey+") does not match provided uid ("+e+")"),h=a.HighlightTypeNewUid);return[e,h]}function f(b,c,h,d){var f=c,k=typeof h;if("undefined"===k)return d.push({Type:"vartype",
FieldName:c,ValueType:k+" (unsupported)"}),null;if(a.windex.objectHasOwnProp(b,c))return{name:c,type:b[c]};b=c.lastIndexOf("_");var l;(l=-1==b)||(l=c.substring(b+1),l=!e[l]);if(l){var m;a:{for(m in e)if(e[m](h))break a;m=null}if(null==m)return a.logIfDebug("Cannot infer type of "+k+" "+h),d.push({Type:"vartype",FieldName:c}),null;b=c.length;a.logIfDebug('Warning: Inferring user variable "'+c+'" to be of type "'+m+'"');c=c+"_"+m}if("object"===k){if(a.isArray(h))return d.push({Type:"vartype",FieldName:f,
ValueType:"array (unsupported)"}),null;if(!h)return d.push({Type:"vartype",FieldName:f,ValueType:"null (unsupported)"}),null}m=[c.substring(0,b),c.substring(b+1)];if(2!=m.length)return a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]'),d.push({Type:"varname",FieldName:f,ValueType:k+" (unsupported)"}),null;b=m[0];m=m[1];l=/^[a-zA-Z][a-zA-Z0-9_]*$/;return l.test(b)||(b=b.replace(/[^a-zA-Z0-9_]/g,"").replace(/^[0-9]+/,""),/[0-9]/.test(b[0])&&
(b=b.substring(1)),d.push({Type:"varname",FieldName:f}),c=b+"_"+m,a.logIfDebug('Warning: variable "'+f+'" has invalid characters. It should match /'+l.source+'/. Converted name to "'+c+'".'),""!=b)?a.windex.objectHasOwnProp(e,m)?e[m](h)?{name:c,type:m}:(a.logIfDebug("illegal value "+a.stringify(h)+" for type "+m),"number"===k?k=0==h%1?"integer":"real":"object"==k&&(null!=h&&h.constructor==Date)&&(k=isNaN(h)?"invalid date":"date"),d.push({Type:"vartype",FieldName:f,ValueType:k}),null):(a.logIfDebug('Variable "'+
f+'" has invalid type "'+m+'"'),d.push({Type:"varname",FieldName:f}),null):null}var d=function(){function e(a){this._identity=a}e.prototype.identity=function(){return this._identity};e.prototype.api=function(e,g){var d=!1,f=[];switch(e){case h.rec:return{events:[],recStatus:g?"restart":"shutdown"};case h.consent:if("boolean"!=typeof g){a.logIfDebug("Expected consent status of type 'boolean' instead got type: \""+typeof g+'", value: "'+g+'"');break}return{events:[{When:0,Kind:a.EVENT_SYS_SETCONSENT,
Args:[g]}],consent:g};case h.account:f.push.apply(f,this.rawEventsFromApi("acct",a.EVENT_SYS_SETVAR,c,g));break;case h.user:if("object"!=typeof g)a.logIfDebug("Expected argument of type 'object' instead got type: '"+typeof g+"', value: "+a.stringify(g));else if("uid"in g){var l=g.uid;if(!1===l)this._identity.clearAppId()&&(d=!0),delete g.uid;else{var m=k(l,this._identity),l=m[0],m=m[1];if(!l){switch(m){case a.HighlightTypeFsId:f.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:[a.HighlightTypeFsId,g.uid+
""]});break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+m)}return{events:f}}g.uid=l;this._identity.setAppId(g.uid);m==a.HighlightTypeNewUid&&(d=!0)}}f.push.apply(f,this.rawEventsFromApi("user",a.EVENT_SYS_SETVAR,b,g));break;case h.customEvent:f.push.apply(f,this.rawEventsFromApi(g.n,a.EVENT_SYS_CUSTOM,{},g.p));default:a.logIfDebug('invalid operation "'+e+'"; only "rec", "account", and "user" are supported at present')}return{events:f,reidentify:d}};e.prototype.rawEventsFromApi=
function(b,c,e,g){e=l(e,g);g=this.eventsForValidationErrors(b,e.ValidationErrors);e.IsEmpty||g.push({When:0,Kind:c,Args:[b,a.stringify(e.PayloadToSend)]});return g};e.prototype.eventsForValidationErrors=function(b,c){for(var e=[],g=0;g<c.length;g++){var h=c[g],d=[h.Type,b+":"+h.FieldName];h.ValueType&&d.push(h.ValueType);e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:d})}return e};return e}();a.Vars=d;a.transformValidateAppId=k;var c={acctId:"str",displayName:"str",website:"str"},b={uid:"str",displayName:"str",
email:"str"},e={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},real:function(a){return"number"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},date:function(a){return a?a.constructor===Date?!isNaN(a):"number"==typeof a||"string"==typeof a?!isNaN(new Date(a)):!1:!1},obj:function(a){return a?"object"==typeof a:!1}},h;(function(a){a.rec="rec";a.user="user";a.account="account";a.consent="consent";a.customEvent="event"})(h=a.ApiType||(a.ApiType=
{}))})(m||(m={}));var D;(function(a){var l="(.*?"+/(?:[^\\](?:\\\\)*)/.source+")";a.CSS_URL=RegExp([['@import\\s+"','"'],["@import\\s+'","'"],['url\\(\\s*"','"\\s*\\)'],["url\\(\\s*'","'\\s*\\)"],["url\\(\\s*","\\s*\\)"]].map(function(a){return"("+a[0]+")"+l+"("+a[1]+")"}).join("|"),"g");a.replaceCssUrls=function(k,f){return k.replace(a.CSS_URL,function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];return f(c[0]||c[3]||c[6]||c[9]||c[12],c[1]||c[4]||c[7]||c[10]||c[13],c[2]||c[5]||
c[8]||c[11]||c[14],c[15])})};a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.IMAGE_FILENAME=
/\.(jpe?g|png|svg|gif|bmp)$/;a.WATCH_RULE_COMMENT=/^\s*\/\//;a.DATA_URI=/^data:([^;,]*)[;,]/i;a.SKETCHY_CONTENT_TYPES=/(application|script|text\/js|text\/html)/i;a.WHITELISTED_CONTENT_TYPES=/(^application\/octet-stream)|(^font\/)|(^application\/[a-z_.-]*font)/i;a.SKETCHY_URI_SCHEMES=/javascript:|file:/i})(D||(D={}));(function(a){a.WatchKindBlocked="blocked";a.WatchKindBlockedConsent="blocked-consent";a.WatchKindWatch="watch";var l=function(){function k(){this._hasWatched=this._consent=!1;this._rules=
Object.create?Object.create(null):{};this._rules[a.WatchKindBlocked]=[];this._rules[a.WatchKindBlockedConsent]=[];this._rules[a.WatchKindWatch]=[]}k.prototype.isWatched=function(f){this._hasWatched=!0;for(var d=0,c=this._consent?[a.WatchKindBlocked,a.WatchKindWatch]:[a.WatchKindBlockedConsent,a.WatchKindBlocked,a.WatchKindWatch];d<c.length;d++)for(var b=c[d],e=0,h=this._rules[b];e<h.length;e++)if(a.matchesSelector(f,h[e]))return b;return null};k.prototype.addRule=function(f){try{return f.Selector.match(D.WATCH_RULE_COMMENT)||
""==a.trim(f.Selector)?!0:this.mergeRule(f.Kind,f.Selector)}catch(d){return a.sendToBugsnag("Error adding block rule '"+f.Selector+"': "+d,"error"),!1}};k.prototype.getConsent=function(){return this._consent};k.prototype.setConsent=function(a){if(this._consent!==a&&(this._consent=a,this._hasWatched&&this.onConsentChange))this.onConsentChange()};k.prototype.mergeRule=function(f,d){var c=document.documentElement||document.createElement("div");try{a.matchesSelector(c,d)}catch(b){return a.sendToBugsnag("Browser rejected block rule '"+
d+"': "+(""+b.toString()),"error"),!1}f!=a.WatchKindBlocked&&(f!=a.WatchKindBlockedConsent&&f!=a.WatchKindWatch)&&(f=a.WatchKindBlocked);if(0==this._rules[f].length)return this._rules[f].push(d),!0;var e=this._rules[f].length-1,h=this._rules[f][e].concat(", ",d);try{a.matchesSelector(c,h)}catch(g){return this._rules[f].push(d),a.sendToBugsnag("Browser rejected merged block rule when adding "+("'"+d+"': "+g.toString()),"warning"),!0}this._rules[f][e]=h;return!0};k.prototype.allConsentSensitiveElements=
function(f){if(0==this._rules[a.WatchKindBlockedConsent].length)return[];if(1==this._rules[a.WatchKindBlockedConsent].length)return f.querySelectorAll(this._rules[a.WatchKindBlockedConsent][0]);for(var d=[],c=0,b=this._rules[a.WatchKindBlockedConsent];c<b.length;c++)for(var e=f.querySelectorAll(b[c]),h=0;h<e.length;h++)d.push(e[h]);return d};k.prototype.mungeWatchedStyle=function(a,d){var c=a.getBoundingClientRect(),b=Math.floor(c.width),c=Math.floor(c.height),e="";null!=d&&(e=d.trim());0<e.length&&
";"!=e.charAt(e.length-1)&&(e+=";");if(0!=b||0!=c)e+="width:"+b+"px;height:"+c+"px;";return e};return k}();a.Watcher=l})(m||(m={}));(function(a){function l(a){return a&&a.stack&&a.stack?a.stack.match(b)?k(a.stack):f(a.stack):[]}function k(a){return a.split("\n").filter(function(a){return!!a.match(b)}).map(function(a){-1<a.indexOf("(eval ")&&(a=a.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var b=a.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/\(native code\)/,
"").split(/\s+/).slice(1);a=c(b.pop());var b=b.join(" "),e=-1<["eval","<anonymous>"].indexOf(a[0])?"":a[0];return d(b,e,a[1],a[2])})}function f(a){return a.split("\n").filter(function(a){return!a.match(e)}).map(function(a){-1<a.indexOf(" > eval")&&(a=a.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1"));if(-1===a.indexOf("@")&&-1===a.indexOf(":"))return[a,"",-1,-1];var b=a.split("@");a=c(b.pop());b=b.join("@");return d(b,a[0],a[1],a[2])})}function d(a,b,c,e){a=a||"";b=b||"";c=parseInt(c||
"-1");e=parseInt(e||"-1");return[a,b,c,e]}function c(a){return a&&-1!==a.indexOf(":")?(a=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(a.replace(/[\(\)]/g,"")))?[a[1]||"",a[2]||"",a[3]||""]:["","",""]:["","",""]}var b=/^\s*at .*(\S+\:\d+|native|(<anonymous>))/m,e=/^(eval@)?(\[native code\])?$/;a.genStackTrace=function(){try{throw Error();}catch(a){return l(a).slice(1)}};a.stackTraceFromError=l})(m||(m={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.HeartbeatInitial=
4E3;a.HeartbeatMax=256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=a.MutationProcessingInterval/5;a.InactivityThreshold=4E3;a.MaxPayloadLength=16384})(m||(m={}));(function(a){var l=function(){function a(d,c){this._q=d;this._valueIndices=c;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,c){var b=this._evts.length;if(1>=b)return!1;for(var e=this._evts[0].When,h=this._evts[b-1].When,g=0;g<this._valueIndices.length;++g){var n=
this._valueIndices[g],f=this._evts[0].Args[n],k=(this._evts[1].When-e)/(h-e),l=(this._evts[1].Args[n]-f)/k,s=this._evts[b-1].Args[n],k=(h-this._evts[b-2].When)/(h-e);c.push(f,s,l,(s-this._evts[b-2].Args[n])/k)}this._evts[0].Kind=a;this._evts[0].Args=c;return!0};a.prototype.evts=function(){return this._evts};return a}(),k=function(){function f(a){this._ctx=a}f.prototype.processQueue=function(d){if(0==d.length)return d;for(var c=this._ctx.time.now(),b=[],e=new l(b,[0,1]),h={},g={},n={},f,k=0;k<d.length;++k){var r=
d[k];switch(r.Kind){case a.EVENT_MOUSEMOVE:e.add(r);break;case a.EVENT_TOUCHMOVE:var s=r.Args[0];s in h||(h[s]=new l(b,[1,2]));h[s].add(r);break;case a.EVENT_SCROLL_LAYOUT:s=r.Args[0];s in g||(g[s]=new l(b,[1,2]));g[s].add(r);break;case a.EVENT_SCROLL_VISUAL_OFFSET:s=r.Args[0];s in n||(n[s]=new l(b,[1,2]));n[s].add(r);break;case a.EVENT_RESIZE_VISUAL:f||(f=new l(b,[0,1]));f.add(r);break;default:b.push(r)}}e.finish(a.EVENT_MOUSEMOVE_CURVE,[c])&&(d=e.evts(),e=d[d.length-1].Args,2<e.length&&e[2]&&d[0].Args.push(e[2]));
for(s in g)d=parseInt(s),g[d].finish(a.EVENT_SCROLL_LAYOUT_CURVE,[c,d]);for(s in n)d=parseInt(s),n[d].finish(a.EVENT_SCROLL_VISUAL_OFFSET_CURVE,[c,d]);for(s in h)d=parseInt(s),h[d].finish(a.EVENT_TOUCHMOVE_CURVE,[c,d]);f&&f.finish(a.EVENT_RESIZE_VISUAL_CURVE,[c]);return b};return f}();a.EventProcessor=k})(m||(m={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=
7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4;a.XHR_STATUS_ABORTED=0})(m||(m={}));(function(a){function l(f,d){var c=Math.min(a.BackoffMax,5E3*Math.pow(2,f));return d?c+0.25*Math.random()*c:c}var k=function(){function f(){}f.prototype.postPromise=function(d,c,b,e){var h=this;return new a.Promise(function(a,n){h.post(d,c,b,e,a,n)})};
return f}();a.HttpPoster=k;k=function(f){function d(){return null!==f&&f.apply(this,arguments)||this}A(d,f);d.prototype.post=function(c,b,e,h,g,d){b="//"+b+e;var f=!1,k=new XMLHttpRequest;if("withCredentials"in k)k.onreadystatechange=function(){if(k.readyState==a.XHR_DONE&&!f){f=!0;try{200==k.status?g(k.responseText):d&&d(k.status)}catch(b){a.sendToBugsnag(b,"error")}}},k.open("POST",c+b,!0),"function"!=typeof h.append&&k.setRequestHeader("Content-Type","text/plain"),k.send(h);else{var l=new XDomainRequest;
l.onload=function(){g(l.responseText)};l.onerror=function(){d&&d("Not Found"==l.responseText?404:500)};l.onprogress=function(){};l.open("POST",b);l.send(h)}};d.prototype.sendBeacon=function(a,b,e,h){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(a+"//"+b+e,h),!0):!1};d.prototype.exponentialBackoffMs=function(a,b){return l(a,b)};return d}(k);a.XHRPoster=k;a.exponentialBackoffMs=l;a.isErrorFatal=function(a){return 400<=a||202==a?!0:!1}})(m||(m={}));(function(a){function l(c,b){return a.stringify({__fs:[c,
b?b:""]})}function k(a,b,e,h,g,d,f,k){a="/rec/bundle?OrgId="+a+"&UserId="+b+"&SessionId="+e+"&PageId="+h+"&Seq="+g.Seq;null!=d&&(a+="&PageStart="+d);null!=f&&(a+="&PrevBundleTime="+f);null!=k&&(a+="&DeltaT="+k);return a}var f=function(){function c(a,c){void 0===c&&(c=new d);this._wnd=a;this._messagePoster=c}c.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};c.prototype.startPipeline=function(a,c){};c.prototype.stopPipeline=function(){};c.prototype.flush=
function(){};c.prototype.singSwanSong=function(){};return c}();a.PostMessageEventTransport=f;var d=function(){function c(){}c.prototype.postMessage=function(b,c,h){var g;try{g=a._fs_transport(b)}catch(d){}g?g.send(c,a.stringify(h)):b.postMessage(l(c,h),"*")};return c}();a.PostMessagePoster=d;a.formatPostMessageData=l;f=function(){function c(b,c,h,g,d){void 0===h&&(h=a.RealTicker);void 0===g&&(g=a.RealTimeout);void 0===d&&(d=new a.XHRPoster);var f=this;this._ctx=b;this._onShutdown=c;this._tickerFactory=
h;this._poster=d;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._serverBundleTime=this._lastPostTime=0;this._largePageSize=16E6;this._outgoingEventQueue=[];this._bundleQueue=[];this._hibernating=!1;this._lastUserEvent=this._heartbeatInterval=0;this._finished=!1;this._bundleHost=a.gceHost(b.options.host);this._protocol=b.options.protocol;this._identity=b.recording.identity;this._lastBundleTime=b.time.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);
this._swanSong=new a.SwanSong(b,this,this._identity,g);this._heartbeatTimeout=new g(function(){f._outgoingEventQueue.push({Kind:a.EVENT_HEARTBEAT,When:f._ctx.time.now(),Args:[]});f._heartbeatInterval*=2;f._heartbeatInterval>a.HeartbeatMax&&(f._heartbeatInterval=a.HeartbeatMax);f._heartbeatTimeout.start(f._heartbeatInterval)});this._hibernationTimeout=new g(function(){f._ctx.time.now()-f._lastUserEvent<=2*a.PageInactivityTimeout&&(f._outgoingEventQueue.push({Kind:a.EVENT_UNLOAD,When:f._ctx.time.now(),
Args:["hibernation"]}),f.singSwanSong());f.stopPipeline();f._hibernating=!0},a.PageInactivityTimeout)}c.prototype.protocol=function(){return this._protocol};c.prototype.enqueueEvents=function(b){if(this._hibernating){if(!this._finished)for(var c=0;c<b.length;c++){var h=b[c];if(a.isUserActionEvent(h.Kind)){this._ctx.recording.splitPage();this._finished=!0;break}}}else{for(c=0;c<b.length;c++)if(h=b[c],a.isUserActionEvent(h.Kind)){this._hibernationTimeout.start();this._heartbeatInterval=a.HeartbeatInitial;
this._heartbeatTimeout.start(this._heartbeatInterval);this._lastUserEvent=this._ctx.time.now();break}for(c=0;c<b.length;c++)h=b[c],this._outgoingEventQueue.push(h)}};c.prototype.startPipeline=function(b,c){var h=this;this._pageId=b;this._serverPageStart=c;this.enqueueAndSendBundle();this._uploadTicker.start(function(){h.enqueueAndSendBundle()});this._heartbeatInterval=a.HeartbeatInitial;this._heartbeatTimeout.start(this._heartbeatInterval);this._hibernationTimeout.start()};c.prototype.stopPipeline=
function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[];this._hibernationTimeout.stop();this._heartbeatTimeout.stop()};c.prototype.flush=function(){this.maybeSendNextBundle()};c.prototype.singSwanSong=function(){if(!this._hibernating&&(0<this._outgoingEventQueue.length&&this.enqueueNextBundle(!0),0<this._bundleQueue.length||this._pendingBundle)){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime,
this._serverPageStart,this._serverBundleTime)}};c.prototype.sendSwanSongBundle=function(a,c,h,g,d,f,l,r,m,q){a=k(a,c,h,g,d,f,l,r);this.post(a,d,m,q)};c.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};c.prototype.enqueueNextBundle=function(b){void 0===b&&(b=!1);var c={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};
this._outgoingEventQueue=[];this._bundleQueue.push(c);b?this._poster.sendBeacon(this._protocol,this._bundleHost,this.bundleUrl(c),a.stringify(c)):this.maybeSendNextBundle()};c.prototype.maybeSendNextBundle=function(){this._pageId&&(this._serverPageStart&&!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};c.prototype._sendPendingBundle=function(){var b=this,c=this._ctx.time.wallTime();if(!(c<this._backoffTime)){var h=this._pendingBundle;
h&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=c,this.sendBundle(h,function(c){a.logIfDebug("Sent bundle "+h.Seq+" with "+h.Evts.length+" events");try{var e=a.parseJson(c);b._serverBundleTime=e.BundleTime}catch(d){a.sendToBugsnag("Failed to JSON parse /rec/bundle response: "+c+": "+d,"error"),b._serverBundleTime=null}b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.time.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(c){a.logIfDebug("Failed to send events.");
a.isErrorFatal(c)?b._onShutdown():(b._pendingBundleFailed=!0,b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))}))}};c.prototype.sendBundle=function(a,c,h){this.post(this.bundleUrl(a),a,c,h)};c.prototype.bundleUrl=function(a){return k(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a,this._serverPageStart,this._serverBundleTime)};c.prototype.post=function(b,c,h,g){var d="";null!=c&&(d=a.stringify(c),this._byteCount+=d.length,
a.logIfDebug("total bytes written: "+this._byteCount));this._poster.post(this._protocol,this._bundleHost,b,d,h,g);this._byteCount>this._largePageSize&&16<this._bundleSeq&&(a.logIfDebug("Splitting large page of size: "+this._byteCount.toString()),a.sendToBugsnag(Error("Large page of "+this._byteCount+" bytes was sent to: "+b),"info"),this._ctx.recording.splitPage(),this._byteCount=0)};return c}();a.HttpEventTransport=f;a.bundleUrl=k})(m||(m={}));(function(a){var l=function(){function a(){this.dict=
{idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(f){function d(){e?1<n?h.push([e.idx,n]):h.push(e.idx):h.push(c)}if(0==f.length)return[];var c=f[0],b,e=Object.prototype.hasOwnProperty.call(this.dict.map,c)?this.dict.map[c]:null,h=[],g,n=1;for(b=1;b<f.length;b++)if(g=f[b],e&&Object.prototype.hasOwnProperty.call(e.map,g))n++,c=g,e=e.map[g];else{d();var p=this.startIdx+b-n;null==e&&this.nodeCount<a.MAX_NODES&&(e={idx:p,map:{}},this.dict.map[c]=e,this.nodeCount++);e&&this.nodeCount<
a.MAX_NODES&&(e.map[g]={idx:p,map:{}},this.nodeCount++);n=1;c=g;e=Object.prototype.hasOwnProperty.call(this.dict.map,g)?this.dict.map[g]:null}d();this.startIdx+=f.length;return h};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=l;l=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=this._seq.length,c=0;c<a.length;++c){var b=a[c];switch(typeof b){case "string":this._seq.push(b);break;case "number":this._seq.push(this._seq[b]);
break;case "object":if(null==b){this._seq.push("");break}for(var e=0;e<b[1];e++)this._seq.push(this._seq[b[0]+e])}}return d};return a}();a.LZJGWDecoder=l})(m||(m={}));(function(a){var l=function(){function k(f,d,c,b){void 0===b&&(b=a.RealTimeout);this._ctx=f;this._transport=d;this._identity=c;this._timeoutFactory=b;this._recover()}k.prototype.sing=function(f,d,c,b,e){a.logIfDebug("Saving "+d.length+" bundles in swan-song.");f={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),
PageId:f,Bundles:d,PageStartTime:this._ctx.time.startTime(),LastBundleTime:c,ServerPageStart:b,ServerBundleTime:e};f=a.stringify(f);if(!(2E6<f.length))try{localStorage[k.localStorageKey]=f}catch(h){}};k.prototype._recover=function(){try{if(k.localStorageKey in localStorage){var f=localStorage[k.localStorageKey];delete localStorage[k.localStorageKey];var d=a.parseJson(f);d.Bundles&&d.UserId&&d.SessionId&&d.PageId?(d.OrgId||(d.OrgId=this._identity.orgId()),0<d.Bundles.length&&(a.logIfDebug("Sending "+
d.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(d.OrgId,d.UserId,d.SessionId,d.PageId,d.Bundles,d.ServerPageStart,d.ServerBundleTime,d.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(c){a.logIfDebug("Error recovering swan-song: "+c)}};k.prototype.sendSwanSongBundles=function(f,d,c,b,e,h,g,n,p){var k=this;void 0===p&&(p=0);var l=null;a.isArray(e)&&(0!==e.length&&void 0!==e[0])&&(1==e.length&&(l=this._ctx.time.wallTime()-(n||0)),this._transport.sendSwanSongBundle(f,
d,c,b,e[0],h,g,l,function(g){a.logIfDebug("Sent "+e[0].Evts.length+" trailing events from last session as Seq "+e[0].Seq);e.shift();var p;try{p=a.parseJson(g).BundleTime}catch(l){a.sendToBugsnag("Failed to JSON parse /rec/bundle response: "+g+": "+l,"error"),p=null}0<e.length?k.sendSwanSongBundles(f,d,c,b,e,h,p,n):a.logIfDebug("Done with prior page swan song")},function(l){a.isErrorFatal(l)?a.logIfDebug("Fatal error while sending events, giving up"):(a.logIfDebug("Failed to send events from last session, will retry while on this page"),
k._lastSwanSongRetryTimeout=(new k._timeoutFactory(k.sendSwanSongBundles,a.exponentialBackoffMs(p,!0),k,f,d,c,b,e,h,g,n,p+1)).start())}))};k.localStorageKey="singSwanSong";return k}();a.SwanSong=l})(m||(m={}));(function(a){var l=function(){function k(f,d,c,b){void 0===c&&(c=function(){return[]});void 0===b&&(b=a.RealTicker);this._ctx=f;this._transport=d;this._gatherExternalEvents=c;this._tickerFactory=b;this._recordingDisabled=!1;this._lastWhen=-1;this._gotUnload=!1;this._eventQueue=[];this._sampleCurvesTicker=
new this._tickerFactory(a.CurveSamplingInterval);this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._processor=new a.EventProcessor(f)}k.prototype.startPipeline=function(a,d,c,b){var e=this;void 0===c&&(c=0);void 0===b&&(b=[]);this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=c,this._parentIds=b,this.processEvents(),this._processMutationsTicker.start(function(){e.processEvents()}),this._sampleCurvesTicker.start(function(){e.processEvents(!0)}),
this._transport.startPipeline(a,d))};k.prototype.enqueue=function(f,d){this.enqueueAt(this._ctx.time.now(),f,d);a.Scheduler.checkForBrokenSchedulers()};k.prototype.enqueueAt=function(a,d,c){this._recordingDisabled||(a<=this._lastWhen&&(a=this._lastWhen+1),this._lastWhen=a,this._eventQueue.push({When:a,Kind:d,Args:c}))};k.prototype.enqueueFirst=function(a,d){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:d}):this.enqueue(a,d)};k.prototype.addUnload=function(f){this._gotUnload||
(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[f]),this.singSwanSong())};k.prototype.shutdown=function(){this._flush();this.addUnload("shutdown");this._flush();this._recordingDisabled=!0;this.stopPipeline()};k.prototype._flush=function(){this.processEvents();this._transport.flush()};k.prototype.prequeue=function(a,d){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:d})};k.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};k.prototype.singSwanSong=
function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())};k.prototype.rebaseIframe=function(a){for(var d=0,c=this._eventQueue.length;d<c;d++){var b=this._eventQueue[d],e=b.When+this._ctx.time.startTime()-a;0>e&&(e=0);b.When=e}};k.prototype.processEvents=function(a){if(this._pipelineStarted){var d=this._eventQueue;this._eventQueue=[];d=this._processor.processQueue(d);a||(d=d.concat(this._gatherExternalEvents(0!=d.length)));this.ensureFrameIds(d);0!=d.length&&this._transport.enqueueEvents(d)}};
k.prototype.ensureFrameIds=function(a){if(this._frameId)for(var d=this._parentIds,c=d&&0<d.length,b=0;b<a.length;++b){var e=a[b];e.FId||(e.FId=this._frameId);c&&!e.PIds&&(e.PIds=d)}};k.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return k}();a.EventQueue=l})(m||(m={}));(function(a){function l(b,c){try{var g={tokens:[],opath:[],cyclic:k(b,c/4)};f(b,c,0,g);return g.tokens.join("")}catch(d){return a.jsonErrorString(d)}}
function k(b,c){var g=0;try{a.windex.jsonStringify(b,function(a,b){if(g++>c)throw"break";return"object"!=typeof b?void 0:b})}catch(d){if("break"!=d)return!0}return!1}function f(c,h,g,n){if(1>h)return 0;var p;c&&c.constructor==Date?p=isNaN(c)?"Invalid Date":c.toUTCString():(p="object"===typeof Node?c instanceof Node:c&&"object"===typeof c&&0<c.nodeType&&"string"===typeof c.nodeName,p=p?d(c):void 0===c?"undefined":"object"!=typeof c||null==c?c:c instanceof Error?c.stack||c.name+": "+c.message:void 0);
if(void 0!==p){p=a.windex.jsonStringify(p);if(void 0===p)return 0;'"'==p[0]&&(p=b(p,h,'..."'));return p.length<=h?(n.tokens.push(p),p.length):0}if(n.cyclic){n.opath.splice(g);p=n.opath.lastIndexOf(c);if(-1<p)return c='"'+b("<Cycle to ancestor #"+(g-p-1)+">",h-2)+'"',n.tokens.push(c),c.length;n.opath.push(c)}var k=h,l=function(a){return k>=a.length?(k-=a.length,n.tokens.push(a),!0):!1};p=function(a){","==n.tokens[n.tokens.length-1]?n.tokens[n.tokens.length-1]=a:l(a)};if(2>k)return 0;if(a.isArray(c)){l("[");
for(var m=0;m<c.length&&0<k;m++){var q=f(c[m],k-1,g+1,n),k=k-q;if(0==q&&!l("null"))break;l(",")}p("]")}else{l("{");for(var t=a.keys(c),m=0;m<t.length&&0<k;m++){var q=t[m],u=c[q];if(!l('"'+q+'":'))break;q=f(u,k-1,g+1,n);if(0==q){n.tokens.pop();break}k-=q;l(",")}p("}")}return Infinity==h?1:h-k}function d(b){if(!a.fsidIfNotBlocked(b))return b.toString();if(b.tagName){var c=a.tagName(b),g=a.uaIsEdge&&"output"==c?{}:b.attributes;return"<"+c+(g&&g.type?' type="'+g.type.value+'"':"")+(b.id?' id="'+b.id+
'"':"")+(b.className?' class="'+b.className+'"':"")+">"+(b.firstChild?"...":"")+"</"+c+">"}c="";b.data&&b.data.substring&&(c=" "+b.data.substring(0,50)+(50<b.data.length?"...":""));return b.nodeName+c}var c=function(){function b(a,c,e){this._queue=a;this._wnd=c;this._overflow=this._enabled=!1;this._total=0;this._hooks=[];this._listeners=e.createChild()}b.prototype.enable=function(){var b=this;this._listeners.add(this._wnd,"error",!0,function(a){return b.addError(a)});this._listeners.add(this._wnd,
"unhandledrejection",!0,function(a){b.addLog("error",["Uncaught (in promise)",a.reason])},!0);if(!this._enabled)if(this._enabled=!0,this._queue.enqueue(a.EVENT_REC_FEAT_SUPPORTED,[a.RecFeatureConsole,!0]),this._wnd.console)for(var c=function(c){var g=a.activateHook(e._wnd.console,c);if(!g)return"continue";g.before(function(a){return b.addLog(c,a.args)});e._hooks.push(g)},e=this,d=0,f=["log","info","warn","error"];d<f.length;d++)c(f[d]);else this.addLog("log",["NOTE: Log messages cannot be captured on IE9"])};
b.prototype.isEnabled=function(){return this._enabled};b.prototype.disable=function(){this._listeners.clear();if(this._enabled){this._enabled=!1;for(var a;a=this._hooks.pop();)a.disable()}};b.prototype.addLog=function(b,c){if(this.checkOverflow()){for(var e=[b],d=0;d<c.length;++d)e.push(l(c[d],1E3));this._queue.enqueue(a.EVENT_LOG,e)}};b.prototype.addError=function(b){if(this.checkOverflow()){var c=b.message,e=b.filename,d=b.lineno;if(c||e||d)"object"==typeof c&&(c=l(c,1E3)),"object"==typeof e&&(e=
l(e,100)),"object"==typeof d&&(d=-1),c=[c,e,d],c=c.concat(a.stackTraceFromError(b.error)),this._queue.enqueue(a.EVENT_ERROR,c)}};b.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",b.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};b.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return b}();a.ConsoleWatcher=c;a.stringifyLogMessage=l;var b=
function(a,b,c){void 0===c&&(c="...");return a.length<=b?a:a.length<=c.length||b<=c.length?a.substring(0,b):a.substring(0,b-c.length)+c}})(m||(m={}));(function(a){function l(){try{if(b)for(var a in e){var c=e[a];b.onChange(c[0],c[1])}}finally{h=null}}function k(c,d){var f=Object.getOwnPropertyDescriptor(c.prototype,d);f&&Object.defineProperty(c.prototype,d,{set:function(c){var g=a.fsid(this);g&&(b&&b.values[g]!=c)&&(e[g]=[this,c],h||(h=new a.RealTimeout(l),h.start()));return f.set.call(this,c)},get:function(){return f.get&&
f.get.call(this)}})}function f(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var d=function(){function e(a,c){this._onchange=a;this._checkElem=c;this._fallback=!1;this._elems={};this.values={};b=this}e.prototype.hookEvents=function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(c||(k(HTMLInputElement,"value"),k(HTMLInputElement,"checked"),k(HTMLSelectElement,"value"),k(HTMLTextAreaElement,"value"),
c=!0),a=!0):a=!1;a||(this._fallback=!0)};e.prototype.addInput=function(b){var c=a.fsid(b);this._elems[c]=b;this.values[c]=f(b);a:switch(b.type){case "checkbox":case "radio":c=b.checked!=b.hasAttribute("checked");break a;default:var c=b.value||"",e;e="select"!=a.tagName(b)?b.getAttribute("value")||"":(e=b.querySelector("option[selected]")||b.querySelector("option"))?e.value||"":"";c=c!=e}c&&this._onchange(b)};e.prototype.onChange=function(b,c){void 0===c&&(c=f(b));var e=a.fsid(b);(b=this._elems[e])&&
c!=this.values[e]&&(this._onchange(b),this.values[e]=c)};e.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],delete this.values[a];else if(this._fallback){var b=this._elems[a],c=f(b);c!=this.values[a]&&(this._onchange(b),this.values[a]=c)}};e.prototype.shutdown=function(){b=null};e.prototype._usingFallback=function(){return this._fallback};e.prototype._trackingElem=function(a){return!!this._elems[a]};return e}();a.InputWatcher=d;var c=!1,
b,e={},h;a.valueOfInputishElem=f})(m||(m={}));(function(a){function l(a){return!!a._fswatch}function k(b){b=f(b);return!!b&&b!=a.WatchKindWatch}function f(a){return a._fswatch}function d(a,b){if("_fswatch"in a||b)a._fswatch=b}function c(b,c){if(l(b.node))for(var e=b,h=b.parent;h;h=h.parent){h.watchedChildSet||(h.watchedChildSet={});if(e.watchedChildSet)for(var g in e.watchedChildSet)delete h.watchedChildSet[g];h.watchedChildSet[e.id]=e;if(a.hasNKeys(h.watchedChildSet,2))e=h;else if(a.hasMoreThanNKeys(h.watchedChildSet,
2))break}}function b(b){return b?a._mirrors[b._fs]:null}function e(a){try{return a&&a._fs||0}catch(b){return 0}}function h(a,b,c){g(b);b.parent=a;if(b.next=c)b.prev=c.prev,c.prev=b;null==b.next?(b.prev=a.lastChild,a.lastChild=b):b.next.prev=b;null==b.prev?a.child=b:b.prev.next=b}function g(b){if(b.parent){if(a.hasMoreThanNKeys(b.watchedChildSet,0)||l(b.node))for(var c=b.watchedChildSet&&a.hasMoreThanNKeys(b.watchedChildSet,1)||l(b.node)?b.id:a.firstKey(b.watchedChildSet),e=c?b.parent:null;e&&e.watchedChildSet&&
e.watchedChildSet[c];){delete e.watchedChildSet[c];if(a.hasNKeys(e.watchedChildSet,1)){for(var c=e.id,h=a.firstValue(e.watchedChildSet),e=e.parent;e&&e.watchedChildSet&&e.watchedChildSet[c];)delete e.watchedChildSet[c],e.watchedChildSet[h.id]=h,e=e.parent;break}e=e.parent}b.parent.child==b&&(b.parent.child=b.next);b.parent.lastChild==b&&(b.parent.lastChild=b.prev);b.prev&&(b.prev.next=b.next);b.next&&(b.next.prev=b.prev);b.parent=b.prev=b.next=null;delete a._mirrors[b.id];b.node._fs==b.id&&(b.node._fs=
0);b.id=0;b.child&&n(b.child)}}function n(b){for(b=[b];0<b.length&&1E4>b.length;){var c=b.pop();delete a._mirrors[c.id];c.node._fs==c.id&&(c.node._fs=0);c.id=0;c.next&&b.push(c.next);c.child&&b.push(c.child)}a.assert(1E4>b.length,"clearIds is fast")}function p(b,c){if((!a.uaIsEdge||"output"!=a.tagName(b))&&b.attributes&&0<b.attributes.length)for(var e=0;e<b.attributes.length;e++){var h=b.attributes[e];null!=h&&c(r(h.name),h.value)}}function m(a,b,c){switch(b){case "class":0>c.indexOf("_fs_block_")&&
(c+=" _fs_block_"+f(a));break;case "alt":case "checked":case "data":case "src":case "title":case "value":return null}return c}function r(a){return/[a-z]/.test(a)?a:t[a]||a.toLowerCase()}function s(b){b=b.textContent;if(!b)return"";var c=b.length;return c>a.MaxTextSizeBytes?(a.sendToBugsnag("Ignoring huge text node with length ["+c+"]","warning"),""):b}a.MaxTextSizeBytes=16E6;a.isWatched=l;a.isBlocked=k;a.watchKind=f;a.setWatched=d;a._mirrors={};a.mirrorFor=b;a.fsid=e;a.fsidIfNotBlocked=function(a){return k(a)?
0:e(a)};a.removeMirror=g;a.clearIds=n;var q=function(){function e(a){this._watcher=a;this._curId=1}e.prototype.curId=function(){return this._curId};e.prototype.tokenizeNode=function(a,c,e,h,g){var d=this._curId;try{var f=b(a),n=b(c);a=[];this.tokeNode(f,n,e,a,h,g);return a}catch(p){return this._curId=d,[]}};e.prototype.tokeNode=function(b,e,g,d,f,n){var k=this;if("SCRIPT"==g.nodeName||g.nodeType==a.Node_COMMENT_NODE)return null;var l={id:this._curId++,node:g};a._mirrors[l.id]=l;g._fs=l.id;b&&h(b,
l,e);if(g.nodeType==a.Node_DOCUMENT_TYPE_NODE)return d.push("<!DOCTYPE",":name",g.name,":publicId",g.publicId||"",":systemId",g.systemId||""),l;b=g.nodeName;"http://www.w3.org/2000/svg"==g.namespaceURI&&(b="svg:"+b);d.push("<"+b);try{var m=this.processWatchedElem(g,d);if(m&&(c(l,m),m!=a.WatchKindWatch))return l;if(f)try{f(g)}catch(x){a.sendToBugsnag(x,"error")}p(g,function(b,c){d.push(":"+b);d.push(c);if(n)try{n(g,b,c)}catch(e){a.sendToBugsnag(e,"error")}});g.firstChild&&(d.push("["),a.forEachNextSibling(g.firstChild,
function(a){k.tokeNode(l,null,a,d,f,n)}),d.push("]"));g.nodeType==a.Node_TEXT_NODE&&d.push(s(g))}catch(r){a.sendToBugsnag(r,"error")}return l};e.prototype.processWatchedElem=function(b,c){if(b.nodeType==a.Node_ELEMENT_NODE&&this._watcher){var e=this._watcher.isWatched(b);d(b,e);if(e&&e!=a.WatchKindWatch){var h,g=!1;p(b,function(a,e){var d=m(b,a,e);"class"==a?h=!0:"style"==a&&(g=!0);null!=d&&(c.push(":"+a),c.push(d))});h||(c.push(":class"),c.push("_fs_block_"+e));g||(c.push(":style"),c.push(this._watcher.mungeWatchedStyle(b,
"")))}return e}return null};return e}();a.NodeEncoder=q;a.rewriteBlockedAttribute=m;var t={ATTRIBUTENAME:"attributeName",ATTRIBUTETYPE:"attributeType",BASEFREQUENCY:"baseFrequency",BASEPROFILE:"baseProfile",CALCMODE:"calcMode",CLIPPATHUNITS:"clipPathUnits",CONTENTSCRIPTTYPE:"contentScriptType",CONTENTSTYLETYPE:"contentStyleType",DIFFUSECONSTANT:"diffuseConstant",EDGEMODE:"edgeMode",EXTERNALRESOURCESREQUIRED:"externalResourcesRequired",FILTERRES:"filterRes",FILTERUNITS:"filterUnits",GLYPHREF:"glyphRef",
GRADIENTTRANSFORM:"gradientTransform",GRADIENTUNITS:"gradientUnits",KERNELMATRIX:"kernelMatrix",KERNELUNITLENGTH:"kernelUnitLength",KEYPOINTS:"keyPoints",KEYSPLINES:"keySplines",KEYTIMES:"keyTimes",LENGTHADJUST:"lengthAdjust",LIMITINGCONEANGLE:"limitingConeAngle",MARKERHEIGHT:"markerHeight",MARKERUNITS:"markerUnits",MARKERWIDTH:"markerWidth",MASKCONTENTUNITS:"maskContentUnits",MASKUNITS:"maskUnits",NUMOCTAVES:"numOctaves",PATHLENGTH:"pathLength",PATTERNCONTENTUNITS:"patternContentUnits",PATTERNTRANSFORM:"patternTransform",
PATTERNUNITS:"patternUnits",POINTSATX:"pointsAtX",POINTSATY:"pointsAtY",POINTSATZ:"pointsAtZ",PRESERVEALPHA:"preserveAlpha",PRESERVEASPECTRATIO:"preserveAspectRatio",PRIMITIVEUNITS:"primitiveUnits",REFX:"refX",REFY:"refY",REPEATCOUNT:"repeatCount",REPEATDUR:"repeatDur",REQUIREDEXTENSIONS:"requiredExtensions",REQUIREDFEATURES:"requiredFeatures",SPECULARCONSTANT:"specularConstant",SPECULAREXPONENT:"specularExponent",SPREADMETHOD:"spreadMethod",STARTOFFSET:"startOffset",STDDEVIATION:"stdDeviation",STITCHTILES:"stitchTiles",
SURFACESCALE:"surfaceScale",SYSTEMLANGUAGE:"systemLanguage",TABLEVALUES:"tableValues",TARGETX:"targetX",TARGETY:"targetY",TEXTLENGTH:"textLength",VIEWBOX:"viewBox",VIEWTARGET:"viewTarget",XCHANNELSELECTOR:"xChannelSelector",YCHANNELSELECTOR:"yChannelSelector",ZOOMANDPAN:"zoomAndPan"};a.fixAttrName=r;a.safeTextContent=s})(m||(m={}));(function(a){function l(){r=!1;var a=s;s=[];a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();k(a);c.length&&(a.callback_(c,
a),b=!0)});b&&l()}function k(a){a.nodes_.forEach(function(b){(b=g.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function f(a,b){for(var c=a;c;c=c.parentNode){var e=g.get(c);if(e)for(var h=0;h<e.length;h++){var d=e[h],f=d.options;(c===a||f.subtree)&&(f=b(f))&&d.enqueue(f)}}}function d(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++q}function c(a){if(w)return w;var b=u,c=new t(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();
c.previousSibling=b.previousSibling;c.nextSibling=b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;w=c;w.oldValue=a;return w}function b(a,b,c){var e=this;this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[];this.handleEventBound=function(a){return e.handleEvent_(a)}}a.MutationObserver=a.uaIsIE&&!a.uaIsIE11?d:window.MutationObserver||window.WebKitMutationObserver||d;var e=Object.defineProperty,h=Date.now()%1E9,g=new (window.WeakMap||
function(){var a=function(){this.name="__st"+(1E9*Math.random()>>>0)+(h++ +"__")};a.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:e(a,this.name,{value:[a,b],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0}};return a}()),n=window.setImmediate||window.msSetImmediate;if(!n){var p=[],m=String(Math.random());window.addEventListener("message",function(a){a.data===m&&(a=p,p=[],a.forEach(function(a){a()}))});n=function(a){for(var b=1;b<arguments.length;b++);
p.push(a);window.postMessage(m,"*");return 0}}var r=!1,s=[],q=0;d.prototype={observe:function(a,c){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!c.childList&&!c.attributes&&!c.characterData||c.attributeOldValue&&!c.attributes||c.attributeFilter&&c.attributeFilter.length&&!c.attributes||c.characterDataOldValue&&!c.characterData)throw new SyntaxError;var e=g.get(a);e||g.set(a,e=[]);for(var h,d=0;d<e.length;d++)if(e[d].observer===this){h=e[d];h.removeListeners();h.options=
c;break}h||(h=new b(this,a,c),e.push(h),this.nodes_.push(a));h.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=g.get(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var t=function(){return function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=
this.nextSibling=this.previousSibling=null}}(),u,w;b.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var e=b[c-1];e=e===a?e:!w||e!==w&&e!==u?null:w;if(e){b[c-1]=e;return}}else s.push(this.observer),r||(r=!0,n(l));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this.handleEventBound,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",
this.handleEventBound,!0);b.childList&&a.addEventListener("DOMNodeInserted",this.handleEventBound,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this.handleEventBound,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this.handleEventBound,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this.handleEventBound,!0);b.childList&&a.removeEventListener("DOMNodeInserted",
this.handleEventBound,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this.handleEventBound,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=g.get(a);b||g.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=g.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},
handleEvent_:function(b){switch(b.type){case "DOMAttrModified":var e=b.attrName,h=b.relatedNode.namespaceURI,g=b.target,d=u=new t("attributes",g);d.attributeName=e;d.attributeNamespace=h;var n=b.attrChange===MutationEvent.ADDITION?null:b.prevValue;f(g,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(e)||-1!==a.attributeFilter.indexOf(h)))return a.attributeOldValue?c(n):d});break;case "DOMCharacterDataModified":g=b.target;d=u=new t("characterData",
g);n=b.prevValue;f(g,function(a){if(a.characterData)return a.characterDataOldValue?c(n):d});break;case "DOMNodeRemoved":this.addTransientObserver(b.target);case "DOMNodeInserted":var g=b.relatedNode,p=b.target,k;"DOMNodeInserted"===b.type?(b=[p],k=[]):(b=[],k=[p]);var l=a.previousSibling(p),p=a.nextSibling(p),d=u=new t("childList",g);d.addedNodes=b;d.removedNodes=k;d.previousSibling=l;d.nextSibling=p;f(g,function(a){if(a.childList)return d})}u=w=void 0}}})(m||(m={}));(function(a){var l=function(){function k(f,
d,c,b,e){void 0===c&&(c=function(){});void 0===b&&(b=function(){});void 0===e&&(e=function(){});var h=this;this._ctx=f;this._watcher=d;this._nodeVisitor=c;this._beforeRemove=b;this._attrVisitor=e;this._sentDomSnapshot=!1;this._toRefresh=[];this._records=[];this._watchedDims={};this._setPropertyWasThrottled=!1;this._wnd=f.window;this._encoder=new a.NodeEncoder(d);a.assert(!this._watcher.onConsentChange,"This is the only consent change listener.");this._watcher.onConsentChange=function(){return h.updateConsent()}}
k.prototype.hookMutations=function(f){var d=this;void 0===f&&(f=this._wnd.document);this._root=f;this._sentDomSnapshot=!1;this._lz=new a.LZJGWEncoder;a.uaIsIE&&this.setUpIEWorkarounds();this._observer=new a.MutationObserver(function(a){for(var b=0;b<a.length;b++)d._records.push(a[b])})};k.prototype._observerOff=function(){this._observer&&this._observer.disconnect()};k.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var f=a.mirrorFor(this._root);f&&a.clearIds(f);this._records=
[];a.uaIsIE&&this.tearDownIEWorkarounds();this._watcher.onConsentChange=null};k.prototype.processMutations=function(){if(!this._root)return[];var f=this._ctx.time.now(),d=[];this.maybeGetInitialSnapshot(f,d);this._setPropertyWasThrottled&&(d.push({Kind:a.EVENT_FAIL_THROTTLED,When:f,Args:[a.ThrottledSetPropertyHooks]}),this._setPropertyWasThrottled=!1);if(0==this._records.length&&0==this._toRefresh.length)return d;var c={},b={};this.processRecords(f,d,b,c);for(var e in b){var h=e.split(":");d.push({Kind:a.EVENT_MUT_ATTR,
When:f,Args:[parseInt(h[0]),h[1],b[e]]})}for(e in c)d.push({Kind:a.EVENT_MUT_TEXT,When:f,Args:[parseInt(e),c[e]]});this._records=[];return d};k.prototype.recordingIsDetached=function(){return this._root&&this._root!=this._wnd.document};k.prototype.maybeGetInitialSnapshot=function(a,d){this._sentDomSnapshot||(this.genInsert(a,d,null,this._root,null),this.resizeRelatedWatchedElements(a,d,this._root),this._observer.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,
characterDataOldValue:!0}),this._sentDomSnapshot=!0)};k.prototype.processRecords=function(f,d,c,b){for(var e=this,h={},g={},n=function(b){a.mirrorFor(b)&&(e.genRemove(f,d,a.mirrorFor(b)),b=a.mirrorFor(b.parentNode))&&(g[b.id]=b.node)},p=0;p<this._records.length;++p)try{var k=this._records[p],l=a.fsid(k.target);if(l)switch(h[l]=k.target,k.type){case "childList":if(0<k.removedNodes.length)for(var m=0;m<k.removedNodes.length;++m){var q=a.mirrorFor(k.removedNodes[m]);q&&q.id&&this.genRemove(f,d,q)}0<
k.addedNodes.length&&(g[l]=k.target);break;case "characterData":var t=a.safeTextContent(k.target);k.oldValue!=t&&(a.isBlocked(k.target)||(b[l]=t));break;case "attributes":var u=k.target,w=this._watcher.isWatched(u);if(w&&w!=a.WatchKindWatch&&!a.isBlocked(u)){n(u);break}var y=k.attributeName||"",G=a.fixAttrName(y);if(u.hasAttribute(y)){var C=k.target.getAttribute(y);k.oldValue!=C&&(C=this.rewriteAttr(k.target,G,C||""),this._attrVisitor(k.target,G,C||""),null!==C&&(c[l+":"+G]=C))}else c[l+":"+G]=null}}catch(v){}c=
0;for(b=this._toRefresh;c<b.length;c++){p=b[c];try{n(p)}catch(z){a.sendToBugsnag(z,"error")}}this._toRefresh=[];for(var H in g)n=g[H],(c=a.mirrorFor(n))&&c.id&&this.diff(f,d,n,c.child,n.firstChild);for(H in h)n=h[H],this.resizeRelatedWatchedElements(f,d,n)};k.prototype._checkForMissingInsertions=function(a){if(!this._sentDomSnapshot||!a)return[];this.walkAddRecords(this._root);return[]};k.prototype.walkAddRecords=function(f){var d=this;a.fsid(f)?a.forEachNextSibling(f.firstChild,function(a){d.walkAddRecords(a)}):
this._records.push({addedNodes:[f],attributeName:null,attributeNamespace:null,nextSibling:f.nextSibling,oldValue:null,previousSibling:f.previousSibling,removedNodes:[],target:f.parentNode,type:"childList"})};k.prototype.diff=function(f,d,c,b,e){for(var h=[];b&&e;){var g=a.mirrorFor(e);a.fsid(e)?g&&b.id==g.id?(b=b.next,e=a.nextSibling(e)):(h.push({remove:b}),b=b.next):(h.push({insert:[c,e,b.node]}),e=a.nextSibling(e))}for(;b;b=b.next)h.push({remove:b});a.forEachNextSibling(e,function(a){h.push({insert:[c,
a,null]})});b=!1;for(e=0;e<h.length;e++)g=h[e],g.insert?this.genInsert(f,d,g.insert[0],g.insert[1],g.insert[2]):g.remove&&(b=!0,this.genRemove(f,d,g.remove));a.assert(!b,"All remove events should have been generated earlier, in MutationWatcher.processMutations")};k.prototype.resizeRelatedWatchedElements=function(f,d,c){var b=a.mirrorFor(c);if(b)for(var e=[b],b=0;e.length&&1E3>++b;){var h=e.pop();c=a.watchKind(h.node);null!=c?this.addPlaceholderResize(f,d,h.node,c):h.watchedChildSet&&a.forIn(h.watchedChildSet,
function(a){e.push(a)})}else{for(b=c;b&&!a.fsid(b);)b=b.parentNode;b&&(c=a.watchKind(b),null!=c&&this.addPlaceholderResize(f,d,b,c))}};k.prototype.addPlaceholderResize=function(f,d,c,b){try{var e=c.getBoundingClientRect(),h=Math.floor(e.width),g=Math.floor(e.height),n=a.fsid(c),p=this._watchedDims[n];p&&p.w==h&&p.h==g||(b==a.WatchKindWatch?(c=0!=h&&0!=g,(!!p&&0!=p.w&&0!=p.h)!=c&&d.push({When:f,Kind:a.EVENT_WATCHED_ELEM,Args:[n,c]})):d.push({When:f,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[n,h,g]}),this._watchedDims[n]=
{w:h,h:g})}catch(k){}};k.prototype.genInsert=function(f,d,c,b,e){var h=this;if(c&&a.isBlocked(c))return null;var g=a.fsid(c)||-1,n=a.fsid(e)||-1,p=[];c=this._encoder.tokenizeNode(c,e,b,function(a){h._nodeVisitor(f,a,p)},function(a,b,c){h._attrVisitor(a,b,c)});0<c.length&&d.push({When:f,Kind:a.EVENT_MUT_INSERT,Args:[g,n,this._lz.encode(c)]});for(d=0;d<p.length;d++)(0,p[d])()};k.prototype.genRemove=function(f,d,c){var b=c.id;this._beforeRemove(c);a.removeMirror(c);if(0<d.length&&(c=d[d.length-1],c.Kind==
a.EVENT_MUT_REMOVE)){c.Args.push(b);return}d.push({When:f,Kind:a.EVENT_MUT_REMOVE,Args:[b]})};k.prototype.rewriteAttr=function(f,d,c){return a.isBlocked(f)?a.rewriteBlockedAttribute(f,d,c):c};k.prototype.setUpIEWorkarounds=function(){var f=this;if(a.uaIsIE11){var d=Object.getOwnPropertyDescriptor(Node.prototype,"textContent"),c=d.set;Object.defineProperty(Element.prototype,"textContent",R({},d,{set:function(a){try{for(var b=void 0;b=this.firstChild;)this.removeChild(b);if(null!==a&&""!=a){var g=(this.ownerDocument||
document).createTextNode(a);this.appendChild(g)}}catch(d){c&&c.apply(this,arguments)}}}))}this._setPropertyThrottle=new a.Throttle(k.ThrottleMax,k.ThrottleInterval,function(){return(new a.RealTimeout(function(){f._setPropertyWasThrottled=!0;f.tearDownIEWorkarounds()})).start()});var b=this._setPropertyThrottle.guard(function(a){return a.cssText=a.cssText});this._setPropertyThrottle.open();(this._setPropertyHook=a.activateHook(CSSStyleDeclaration.prototype,"setProperty"))&&this._setPropertyHook.afterSync(function(){b(this)});
(this._removePropertyHook=a.activateHook(CSSStyleDeclaration.prototype,"removeProperty"))&&this._removePropertyHook.afterSync(function(){b(this)})};k.prototype.tearDownIEWorkarounds=function(){this._setPropertyThrottle&&this._setPropertyThrottle.close();this._setPropertyHook&&this._setPropertyHook.disable();this._removePropertyHook&&this._removePropertyHook.disable()};k.prototype.updateConsent=function(){for(var f=this._watcher.allConsentSensitiveElements(this._root),d=0;d<f.length;d++)a.fsid(f[d])&&
this._toRefresh.push(f[d])};k.ThrottleMax=1024;k.ThrottleInterval=1E4;return k}();a.MutationWatcher=l})(m||(m={}));(function(a){a.parseFieldPatterns=function(a){var k=0,f={id:k++,edges:{}};a.split("\n").forEach(function(a){a=a.trim();if(""!=a){if(0==a.indexOf("/")||a.lastIndexOf("/")==a.length-1)throw Error("Leading and trailing slashes are not supported");var c=f,b=a.split("/");b.forEach(function(a,h){a=a.trim();if(""===a)throw Error("Empty elements are not allowed");if("**"!=a&&"*"!=a&&-1!=a.indexOf("*"))throw Error("Embedded wildcards are not supported");
var g=null;"**"==a?(c.loop=!0,g=c):a in c.edges&&(g=c.edges[a]);g||(g={id:k++,edges:{}},c.edges[a]=g);h==b.length-1&&(g.term=!0);c=g})}});return f}})(m||(m={}));(function(a){var l=a.parseFieldPatterns("**");a.whitelistedJson=function(k,f,d){if(!1!=d){d=!0==d?l:d;try{var c=0,b=[1],e=[],h={};h[d.id]=d;e.push(h);return a.windex.jsonStringify(k,function(h,g){var d=g&&"object"==typeof g;if(""==h&&1==b.length)return b[0]--,d&&b.push(a.windex.objectKeys(g).length),g;var k={},l=e[e.length-1],m=!0,t=!1,u=
function(a){k[a.id]=a;m=!1;a.term&&(t=!0)},w;for(w in l){var y=l[w];h in y.edges&&u(y.edges[h]);"*"in y.edges&&u(y.edges["*"]);y.loop&&u(y)}if(m||!d&&!t)g=null;c+=h.length+2;c=d?c+2:null===g?c+4:c+g.toString().length;c>=f&&(g=void 0);b[b.length-1]--;g&&d&&(b.push(a.windex.objectKeys(g).length),e.push(k));for(;0>=b[b.length-1];)b.pop(),e.pop();return g})}catch(g){}return"[error serializing "+k.constructor.name+"]"}}})(m||(m={}));(function(a){var l;a.theDummyDoc=function(){l||(l=document.implementation.createHTMLDocument(""),
l.head||l.documentElement.appendChild(l.createElement("head")),l.body||l.documentElement.appendChild(l.createElement("body")));return l}})(m||(m={}));(function(a){function l(a){var d=a.document,c=a.location.href;"string"==typeof d.baseURI?c=d.baseURI:(d=d.getElementsByTagName("base")[0])&&d.href&&(c=d.href);return"about:blank"==c&&a.parent!=a?l(a.parent):c}var k=function(){function f(){var d=a.theDummyDoc(),c=d.getElementById("urlresolver-base");c||(c=d.createElement("base"),c.id="urlresolver-base",
d.head.appendChild(c));var b=d.getElementById("urlresolver-parser");b||(b=d.createElement("a"),b.id="urlresolver-parser",d.head.appendChild(b));this.base=c;this.parser=b}f.prototype.parseUrl=function(a,c){this.base.setAttribute("href",a);this.parser.setAttribute("href",c);var b=document.createElement("a");b.href=this.parser.href;return b};f.prototype.resolveUrl=function(a,c){return this.parseUrl(a,c).href};f.prototype.resolveToDocument=function(a,c){var b=l(a);return null==b?c:this.resolveUrl(b,c)};
return f}();a.UrlResolver=k;a.baseUri=l})(m||(m={}));(function(a){function l(a,b){return[a.length,g(a,b)]}function k(b,c){var e=void 0;!1!==c&&(e=a.whitelistedJson(b,a.MaxPayloadLength,c));var h=0;try{h=a.windex.jsonStringify(b).length}catch(g){}return[h,e]}function f(a,b){var c=a.byteLength,e=void 0;b&&(e="[ArrayBuffer]");return[c,e]}function d(a,b){var c=a.size,e=void 0;b&&(e="[Blob]");return[c,e]}function c(a,b){return[a.length,g(a,b)]}function b(a,b){return[a.length,b?"[Document]":void 0]}function e(a,
b){return[a.byteLength,b?"[ArrayBuffer]":void 0]}function h(a,b){return[a.size,b?"[Blob]":void 0]}function g(b,c){if(!1!=c)try{return a.whitelistedJson(a.windex.jsonParse(b),a.MaxPayloadLength,c)}catch(e){if(!0==c)return b.slice(0,a.MaxPayloadLength)}}function n(b,c){switch(b){default:case a.AjaxBodyElide:return!1;case a.AjaxBodyRecord:return!0;case a.AjaxBodyWhitelist:try{return a.parseFieldPatterns(c)}catch(e){return a.logIfDebug("error parsing field whitelist ("+c+": "+e),!1}}}function p(a){var b=
[];a.split(r).forEach(function(a){var c=a.indexOf(":");-1!=c?b.push([a.slice(0,c).trim(),a.slice(c+1,a.length).trim()]):b.push([a.trim(),null])});return b}function m(a,b){var c="";a.forEach(function(a){a[0]=a[0].toLowerCase();var e=b(a);c+=""+a[0]+(e?": "+a[1]:"")+r});return c}var r="\r\n",s="a-im accept accept-charset accept-encoding accept-language accept-datetime access-control-request-method, access-control-request-headers cache-control connection content-length content-md5 content-type date expect forwarded from host if-match if-modified-since if-none-match if-range if-unmodified-since max-forwards origin pragma range referer te user-agent upgrade via warning".split(" "),
q="access-control-allow-origin access-control-allow-credentials access-control-expose-headers access-control-max-age access-control-allow-methods access-control-allow-headers accept-patch accept-ranges age allow alt-svc cache-control connection content-disposition content-encoding content-language content-length content-location content-md5 content-range content-type date delta-base etag expires im last-modified link location permanent p3p pragma proxy-authenticate public-key-pins retry-after permanent server strict-transport-security trailer transfer-encoding tk upgrade vary via warning www-authenticate x-frame-options".split(" "),
t=function(){function g(b,c){var e=this;this._ctx=b;this._queue=c;this._enabled=!1;this._reqHeaderWhitelist={};this._rspHeaderWhitelist={};this._pendingReqs={};this._events=[];this._curId=1;this._resolver=new a.UrlResolver;s.forEach(function(a){return e._reqHeaderWhitelist[a]=!0});q.forEach(function(a){return e._rspHeaderWhitelist[a]=!0})}g.prototype.isEnabled=function(){return this._enabled};g.prototype.enable=function(){this._enabled||(this._enabled=!0,this._queue.enqueue(a.EVENT_REC_FEAT_SUPPORTED,
[a.RecFeatureAjax,!0]),this.maybeShimXHR(this._ctx.window))};g.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._xhrOpenHook&&(this._xhrOpenHook.disable(),this._xhrOpenHook=null),this._xhrSetHeaderHook&&(this._xhrSetHeaderHook.disable(),this._xhrSetHeaderHook=null))};g.prototype.setWatches=function(a){var b=this,c=[];this._reqWhitelist=[];this._rspWhitelist=[];a.forEach(function(a){c.push(a.URLRegex);b._reqWhitelist.push(n(a.RecordReq,a.ReqWhitelist));b._rspWhitelist.push(n(a.RecordRsp,
a.RspWhitelist))});this._reqBodyRegex=RegExp("("+c.join(")|(")+")")};g.prototype.addHeaderWhitelist=function(a,b){var c=this;a.forEach(function(a){return c._reqHeaderWhitelist[a]=!0});b.forEach(function(a){return c._rspHeaderWhitelist[a]=!0})};g.prototype.tick=function(b){if(b){for(b=0;b<this._events.length;b++)this._queue.enqueue(a.EVENT_AJAX_REQUEST,this._events[b]);this._events=[]}};g.prototype.maybeShimXHR=function(b){var c=this;if(b=b.XMLHttpRequest)b=b.prototype,(this._xhrOpenHook=a.activateHook(b,
"open"))&&this._xhrOpenHook.before(function(a){c.addPendingReq(a.that,a.args[0],a.args[1]);a.that.addEventListener("load",function(b){c.onComplete(a.that)});a.that.addEventListener("error",function(b){c.onComplete(a.that)})}),(this._xhrSendHook=a.activateHook(b,"send"))&&this._xhrSendHook.before(function(a){c.maybeRecordReqBody(a.that,a.args[0])}),(this._xhrSetHeaderHook=a.activateHook(b,"setRequestHeader"))&&this._xhrSetHeaderHook.before(function(a){c.addHeader(a.that,a.args[0],a.args[1])})};g.prototype.pendingReq=
function(b){b=b._fs;return b?this._pendingReqs[b]:(a.logIfDebug("missing xhr req id"),null)};g.prototype.deletePending=function(a){(a=a._fs)&&delete this._pendingReqs[a]};g.prototype.maybeRecordReqBody=function(a,b){var c=this.pendingReq(a);if(!c)return null;e=this.requestBody(c.url,b);c.reqSize=e[0];c.reqBody=e[1];var e};g.prototype.addPendingReq=function(a,b,c){this.deletePending(a);var e=this._curId++;c=this._resolver.resolveToDocument(this._ctx.window,c);this._pendingReqs[e]={id:e,xhr:a,method:b,
url:c,startTime:Date.now(),headers:[],reqSize:0,reqBody:void 0};a._fs=e};g.prototype.addHeader=function(a,b,c){(a=this.pendingReq(a))&&a.headers.push([b,c])};g.prototype.onComplete=function(a){var b=this,c=this.pendingReq(a);if(c){this.deletePending(a);var e=Date.now()-c.startTime,g=m(c.headers,function(a){return a[0]in b._reqHeaderWhitelist}),h=m(p(a.getAllResponseHeaders()),function(a){return a[0]in b._rspHeaderWhitelist}),d=this.responseBody(c.url,a),f=d[1];a=[c.method,c.url,e,a.status,g,h,c.startTime,
c.reqSize,d[0]];a.push(c.reqBody?c.reqBody:null);a.push(f?f:null);this._events.push(a)}};g.prototype.findWhitelistIndexFor=function(a){if(this._reqBodyRegex&&(a=this._reqBodyRegex.exec(a)))for(var b=1;b<a.length;b++)if(void 0!==a[b])return b-1;return-1};g.prototype.requestBody=function(a,b){if(null==b)return[0,void 0];var c=this.findWhitelistIndexFor(a),c=0<=c?this._reqWhitelist[c]:!1,e=typeof b;if("string"==e)return l(b,c);if("object"==e)switch(e=e.constructor,e){default:return k(b,c);case Blob:return d(b,
c);case ArrayBuffer:return f(b,c);case Document:case FormData:case URLSearchParams:case ReadableStream:return[-1,c?""+e.name:void 0]}return[-1,c?"[unknown]":void 0]};g.prototype.responseBody=function(a,g){var d=this.findWhitelistIndexFor(a),d=0<=d?this._rspWhitelist[d]:!1;if(g.responseType)switch(g.responseType){case "arraybuffer":return e(g.response,d);case "blob":return h(g.response,d);case "document":return b(g.responseText,d)}return c(g.responseText,d)};return g}();a.AjaxWatcher=t;a._reqBodyString=
l;a._reqBodyObject=k;a._reqBodyArrayBuffer=f;a._reqBodyBlob=d;a._rspBodyText=c;a._rspBodyDocument=b;a._rspBodyArrayBuffer=e;a._rspBodyBlob=h;a.parseHeaders=p})(m||(m={}));(function(a){function l(a){a=String(a);for(var c,h,g=0,n=f,k=[];a.charAt(g|0)||(n="=",g%1);k.push(n.charAt(63&c>>8-8*(g%1)))){h=a.charCodeAt(g+=0.75);if(255<h)throw new d("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|h}return k.join("")}var k=function(){function a(b){void 0===
b&&(b=4);this.hashCount=b;this.idx=0;if(1!==b&&4!==b)throw Error("Trying to create FSNV hasher with "+b+" hashes");this.hashMask=b-1;this.reset()}a.prototype.reset=function(){this.idx=0;this.hash=[];for(var a=0;a<this.hashCount;++a)this.hash.push(2166136261)};a.prototype.write=function(a){for(var b=this.hashMask,c=this.idx,d=0;d<a.length;d++)this.hash[c]^=a[d],this.hash[c]+=(this.hash[c]<<1)+(this.hash[c]<<4)+(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24),c=c+1&b;this.idx=c};a.prototype.writeAscii=
function(a){for(var b=this.hashMask,c=this.idx,d=0;d<a.length;d++)this.hash[c]^=a.charCodeAt(d),this.hash[c]+=(this.hash[c]<<1)+(this.hash[c]<<4)+(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24),c=c+1&b;this.idx=c};a.prototype.sum=function(){var a=this.sumAsHex();return c(String.fromCharCode.apply(null,a.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" "))).replace(/\+/g,"-").replace(/\//g,"_")};a.prototype.sumAsHex=function(){for(var a="",b=0;b<this.hashCount;++b)a+=
("00000000"+(this.hash[b]>>>0).toString(16)).slice(-8);return a};return a}();a._FSNV=k;a.hash128NonBlocking=function(b,c,h){void 0===h&&(h=new k);return v(this,void 0,void 0,function(){var g,d,f,k;return z(this,function(l){switch(l.label){case 0:g=b.now(),d=c.byteLength,f=0,l.label=1;case 1:return f<d?25<b.now()-g?[4,a.wait(100)]:[3,3]:[3,5];case 2:l.sent(),g=b.now(),l.label=3;case 3:k=new Uint8Array(c,f,Math.min(d-f,1E4)),h.write(k),l.label=4;case 4:return f+=1E4,[3,1];case 5:return[2,{hash:h.sum(),
hasher:h}]}})})};a.hashString32Blocking=function(a){var c=new k(1);c.writeAscii(a);return c.sumAsHex()};var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}A(c,a);return c}(Error),c=window.btoa||l;a._jsbtoa=l})(m||(m={}));(function(a){function l(c,b){var e,h=new a.Promise(function(a){return e=a});if(!a.assert(a.prefix(c,"blob:"),'Blob url must start with "blob:"'))return e(null),h;var g=new XMLHttpRequest;
if("string"!=typeof g.responseType)return e(null),h;g.open("GET",c);g.responseType=b;g.onerror=function(){e(null)};g.onload=function(){if(200!=g.status)a.logIfDebug("Error loading blob resource "+c),e(null);else{var b=g.response;(b.size||b.length)>f?(a.sendToBugsnag("Size of blob resource "+c+" exceeds limit of "+f,"warning"),e(null)):"string"==typeof b?e({data:b,contentType:g.getResponseHeader("Content-Type")}):k(b).then(function(a){a?e({data:a,blob:b,contentType:b.type}):e(null)})}};g.send();return h}
function k(c){var b,e=new a.Promise(function(a){return b=a}),h=new FileReader;h.readAsArrayBuffer(c);h.onload=function(){b(h.result)};h.onerror=function(c){a.sendToBugsnag(c,"error");b(null)};return e}var f=6E6,d=function(){function c(b,c,h,g,d){void 0===h&&(h=new a.XHRPoster);void 0===g&&(g=window.FormData);void 0===d&&(d=a.RealTimeout);this.ctx=b;this.queue=c;this.poster=h;this.FormDataCtr=g;this.Timeout=d;this.started={};this.byUrl={};this.batchReady=!1;this.existsBatch=[];this.host=a.gceHost(this.ctx.options.host)}
c.prototype.init=function(){this.FormDataCtr&&this.main().catch(function(b){a.sendToBugsnag(b,"error")})};c.prototype.main=function(){return v(this,void 0,void 0,function(){var b=this,c,h,d,f,k,l,m,s,q,t;return z(this,function(u){switch(u.label){case 0:return[4,this.getBatch()];case 1:c=u.sent();h=a.stringify({fsnv:a.map(c,function(a){return a.hash})});d={};for(f=0;f<c.length;f++)k=c[f],d[k.hash]=k;l=this.ctx.options.orgId;m="/rec/newResources?OrgId="+l;u.label=2;case 2:return u.trys.push([2,4,,5]),
[4,this.poster.postPromise(this.ctx.options.protocol,this.host,m,h)];case 3:return s=u.sent(),[3,5];case 4:return q=u.sent(),a.logIfDebug("/rec/newResources failed with status "+q),[3,0];case 5:try{t=JSON.parse(s)}catch(w){return a.sendToBugsnag("Error parsing /rec/newResources response","error"),[3,0]}return[4,a.forInAsync(t,function(c,e){return v(b,void 0,void 0,function(){var b,h,f,k,n,p,m,r,s,q;return z(this,function(t){switch(t.label){case 0:if("fsnv"!=e)return[2];b=0;h=c;t.label=1;case 1:if(!(b<
h.length))return[3,6];f=h[b];k=d[f];if(null==k)return a.sendToBugsnag("Server told us to upload a hash we don't have","error"),[3,5];n=k.url;p=k.children;m=k.contentType;r=k.blob||k.stringData;s=k.blob||new Blob([k.stringData],{type:m});if(null==r)return a.sendToBugsnag("Tried to re-upload a resource","error"),[3,5];q=new this.FormDataCtr;q.append("orgId",l);q.append("baseUrl",n);q.append("fsnvHash",f);q.append("childHashes",a.stringify(p));q.append("contents",s,"blob");k.blob=k.stringData=null;t.label=
2;case 2:return t.trys.push([2,4,,5]),[4,this.poster.postPromise(this.ctx.options.protocol,this.host,"/rec/uploadResource",q)];case 3:return t.sent(),[3,5];case 4:return t.sent(),a.logIfDebug("Server error uploading resource"),[3,5];case 5:return b++,[3,1];case 6:return[2]}})})})];case 6:return u.sent(),[3,0];case 7:return[2]}})})};c.prototype.getBatch=function(){var b=this,c,h=new a.Promise(function(a){return c=a}),d=function(){b.popBatch=null;b.batchReady=!1;var a=b.existsBatch;b.existsBatch=[];
c(a)};this.batchReady?d():this.popBatch=d;return h};c.prototype.uploadBlob=function(b,c){void 0===c&&(c=!1);return v(this,void 0,void 0,function(){var h=this,d,f,k,l,m,s,q;return z(this,function(t){switch(t.label){case 0:if(0!=b.lastIndexOf("blob:",0)||!this.FormDataCtr||this.started[b])return[2];this.started[b]=!0;return[4,this.processResource(b,c)];case 1:d=t.sent();if(!d)return[2];f=0==this.existsBatch.length;for(k=[d];0<k.length;)if(l=k.pop()){m=0;for(s=a.values(l.children);m<s.length;m++)q=s[m],
k.push(q);this.existsBatch.push(l)}f&&(new this.Timeout(function(){h.batchReady=!0;h.popBatch&&h.popBatch()},50)).start();return[2]}})})};c.prototype.processResource=function(b,c,h){void 0===h&&(h=0);return v(this,void 0,void 0,function(){var d;return z(this,function(f){switch(f.label){case 0:return this.byUrl[b]?[2,this.byUrl[b]]:3<h?(a.sendToBugsnag("Resource uploading exceeded max resource depth 3","warning"),[2,null]):[4,c?this.processCss(b,h):this.processImage(b)];case 1:d=f.sent();if(!d)return[2,
null];this.byUrl[d.url]=d;this.queue.enqueue(a.EVENT_SYS_RESOURCEHASH,["url",b,d.hash]);return[2,d]}})})};c.prototype.processImage=function(b){return v(this,void 0,void 0,function(){var c,d;return z(this,function(g){switch(g.label){case 0:return[4,l(b,"blob")];case 1:return(c=g.sent())?[4,a.hash128NonBlocking(this.ctx.time,c.data)]:[2,null];case 2:return d=g.sent().hash,[2,{hash:d,url:b,blob:c.blob,contentType:c.contentType,children:{}}]}})})};c.prototype.processCss=function(b,c){return v(this,void 0,
void 0,function(){var d,g,f,p,m,r,s,q,t,u,w,y;return z(this,function(v){switch(v.label){case 0:return[4,l(b,"text")];case 1:d=v.sent();if(!d)return[2,null];g=[];f=1E6<d.data.length?d.data:D.replaceCssUrls(d.data,function(b,c,e,f){a.prefix(c,"blob:")&&(f=a.trim(d.data.substring(f-20,f)),f=a.prefix(b,"@import")||f.lastIndexOf("@import")==f.length-7,g.push({url:c,isCss:f}),c="");return b+c+e});return[4,k(new Blob([f]))];case 2:return(p=v.sent())?[4,a.hash128NonBlocking(this.ctx.time,p)]:[2,null];case 3:m=
v.sent().hasher,r={},s=0,q=g,v.label=4;case 4:if(!(s<q.length))return[3,7];t=q[s];u=t.url;w=t.isCss;return[4,this.processResource(u,w,c+1)];case 5:y=v.sent();if(!y)return[3,6];r[u]=y;m.writeAscii(y.hash);v.label=6;case 6:return s++,[3,4];case 7:return[2,{url:b,hash:m.sum(),stringData:d.data,contentType:d.contentType||"text/css",children:r}]}})})};return c}();a.ResourceUploader=d})(m||(m={}));(function(a){var l="navigationStart unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
k="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd unloadEventStart unloadEventEnd domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd type redirectCount decodedBodySize encodedBodySize transferSize".split(" "),f="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd decodedBodySize encodedBodySize transferSize".split(" "),
d=["name","startTime","duration"],c=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],b=function(){function b(c,e){this._ctx=c;this._queue=e;this._memorySupported=this._getEntriesSupported=this._timingSupported=this._perfSupported=!1;this._lastUsedJSHeapSize=this._lastPerfCount=0;this._gotLoad=!1;window.performance&&(this._perfSupported=!0,window.performance.timing&&(this._timingSupported=!0),window.performance.memory&&(this._memorySupported=!0),"function"===typeof window.performance.getEntries&&
(this._getEntriesSupported=!0),c.recording.inFrame||this._queue.enqueue(a.EVENT_REC_FEAT_SUPPORTED,[a.RecFeaturePerformance,this._timingSupported,a.RecFeaturePerformanceEntries,this._getEntriesSupported,a.RecFeaturePerformanceMemory,this._memorySupported]),this.checkMemory())}b.prototype.onLoad=function(){this._gotLoad||(this._gotLoad=!0,this._timingSupported&&(this.recordTiming(performance.timing),this.checkForNewEntries()))};b.prototype.tick=function(a){this.checkMemory();a&&this.checkForNewEntries()};
b.prototype.checkMemory=function(){if(this._memorySupported&&!this._ctx.recording.inFrame){var b=performance.memory,e=b.usedJSHeapSize-this._lastUsedJSHeapSize;if(0==this._lastUsedJSHeapSize||0.2<Math.abs(e/this._lastUsedJSHeapSize))this.addPerfEvent(a.PerfEntryMemory,b,c),this._lastUsedJSHeapSize=b.usedJSHeapSize}};b.prototype.checkForNewEntries=function(){if(this._perfSupported&&this._getEntriesSupported){var a=performance.getEntries();if(a.length>this._lastPerfCount){for(;this._lastPerfCount<a.length;this._lastPerfCount++){var b=
a[this._lastPerfCount];switch(b.entryType){case "navigation":this.recordNavigation(b);break;case "resource":this.recordResource(b);break;case "paint":this.recordPaint(b);break;case "measure":this.recordMeasure(b);break;case "mark":this.recordMark(b)}}this._lastPerfCount=a.length}}};b.prototype.recordTiming=function(b){this.addPerfEvent(a.PerfEntryTiming,b,l)};b.prototype.recordNavigation=function(b){this.addPerfEvent(a.PerfEntryNavigation,b,k)};b.prototype.recordResource=function(b){this.addPerfEvent(a.PerfEntryResource,
b,f)};b.prototype.recordPaint=function(b){this.addPerfEvent(a.PerfEntryPaint,b,d)};b.prototype.recordMark=function(b){this.addPerfEvent(a.PerfEntryMark,b,d)};b.prototype.recordMeasure=function(b){this.addPerfEvent(a.PerfEntryMeasure,b,d)};b.prototype.addPerfEvent=function(b,c,e){b=[b];for(var d=0;d<e.length;d++){var f=c[e[d]];void 0===f&&(f=-1);b.push(f)}this._queue.enqueue(a.EVENT_PERF_ENTRY,b)};return b}();a.PerfWatcher=b})(m||(m={}));(function(a){function l(c,b){void 0===b&&(b=0);if(!a.assert(20>=
b,"No deep recursion for CSS rules"))return"html { /* Depth limit exceeded! */ }";var e=k(c);if(null==e)return c.cssText;var d;var g=b,f=c.style;if(f){g="";for(d=0;d<f.length;d++)var p=f[d],g=g+(p+": "+f[p]+"; ");d=g}else if(f=c.cssRules){p="";for(d=0;d<f.length;d++)p+=l(f[d],g+1);d=p}else d=null;return null==d?c.cssText:e+" { "+d+"} "}function k(c){switch(c.type){case CSSRule.PAGE_RULE:return(c=c.selectorText||"")&&a.prefix(c,"@page")?c:"@page "+c;case CSSRule.KEYFRAME_RULE:return c.keyText;case CSSRule.STYLE_RULE:return c.selectorText;
case CSSRule.MEDIA_RULE:return"@media "+c.media.mediaText;case CSSRule.KEYFRAMES_RULE:return"@keyframes "+c.name;case CSSRule.SUPPORTS_RULE:return"@supports "+c.conditionText;default:return null}}var f=function(){function c(b,e){var d=this;this.ctx=b;this.queue=e;this.hooks=[];var g=c;this.throttle=new a.Throttle(g.ThrottleMax,g.ThrottleInterval,function(){return setTimeout(function(){d.queue.enqueue(a.EVENT_FAIL_THROTTLED,[a.ThrottledStyleSheetHooks]);d.stop()})});this.addInsert=this.throttle.guard(this.addInsert);
this.addDelete=this.throttle.guard(this.addDelete)}c.prototype.start=function(){var b=this;this.throttle.open();var c=this.ctx.window;if(c.CSSStyleSheet){var c=c.CSSStyleSheet.prototype,d;if(d=a.activateHook(c,"insertRule"))d.afterSync(function(a){b.addInsert(a.that,a.args[0],a.args[1])}),this.hooks.push(d);if(d=a.activateHook(c,"deleteRule"))d.afterSync(function(a){b.addDelete(a.that,a.args[0])}),this.hooks.push(d)}};c.prototype.snapshot=function(b,c){void 0===c&&(c=0);var h=a.fsid(b);if(h){var g=
a.sheetRules(a.elemSheet(b));if(g)for(var f=c;f<g.length;f++){var k=void 0;try{k=d(g[f])}catch(l){k="html {}"}this.queue.enqueue(a.EVENT_CSSRULE_INSERT,[h,k,f])}}};c.prototype.addInsert=function(b,c,d){(b=a.fsid(b.ownerNode))&&"string"==typeof c&&(c=[b,c],"number"==typeof d&&c.push(d),this.queue.enqueue(a.EVENT_CSSRULE_INSERT,c))};c.prototype.addDelete=function(b,c){var d=a.fsid(b.ownerNode);d&&"number"==typeof c&&this.queue.enqueue(a.EVENT_CSSRULE_DELETE,[d,c])};c.prototype.stop=function(){this.throttle.close();
for(var a=0,c=this.hooks;a<c.length;a++)c[a].disable();this.hooks=[]};c.ThrottleMax=1E4;c.ThrottleInterval=1E4;return c}();a.StyleSheetWatcher=f;var d,f=document.createElement("div");f.style.width="initial";d=""!=f.style.cssText?function(a){return a.cssText}:l;a._jsCssText=l;a.getDynamicRuleTail=function(c){var b=c.textContent||"";if(!(5E5<b.length)){var e=a.sheetRules(a.elemSheet(c));if(e){if(0<e.length&&/^\s*$/.test(b))return 0;b=a.theDummyDoc();c=b.importNode(c,!0);b.head.appendChild(c);var d=
a.sheetRules(a.elemSheet(c));b.head.removeChild(c);if(d&&e.length>d.length)return d.length}}}})(m||(m={}));(function(a){function l(a){return{pageLeft:a.pageLeft,pageTop:a.pageTop,width:a.width,height:a.height}}function k(a){return a&&a.body&&a.documentElement?"BackCompat"==a.compatMode?[a.body.clientWidth,a.body.clientHeight]:[a.documentElement.clientWidth,a.documentElement.clientHeight]:[0,0]}function f(a,c){return new d(a,c)}a.sameViewportPos=function(a,c){return c&&a.pageLeft==c.pageLeft&&a.pageTop==
c.pageTop};a.sameVisualViewportOffset=function(a,c){return c&&a.offsetLeft==c.offsetLeft&&a.offsetTop==c.offsetTop};a.sameViewportSize=function(a,c){return c&&a.width==c.width&&a.height==c.height};a.sameLayoutViewportSize=function(a,c){return c&&a.width==c.width&&a.height==c.height&&a.clientWidth==c.clientWidth&&a.clientHeight==c.clientHeight};a.createVisualViewportLike=function(a){var c=l(a);c.offsetLeft=a.offsetLeft;c.offsetTop=a.offsetTop;return c};a.createLayoutViewportLike=function(a){var c=
l(a);c.clientWidth=a.clientWidth;c.clientHeight=a.clientHeight;return c};a.getDocumentClientArea=k;var d=function(){function b(a,b){this.hasKnownPosition=!1;this.clientHeight=this.clientWidth=this.height=this.width=this.pageTop=this.pageLeft=0;var c=a.document;if(c.body){if("visualViewport"in a){var d=c.documentElement.getBoundingClientRect();this.hasKnownPosition=!0;this.pageLeft=0==d.left?0:-d.left;this.pageTop=0==d.top?0:-d.top}c=k(c);this.clientWidth=c[0];this.clientHeight=c[1];void 0!==b&&this.clientWidth==
b.clientWidth&&this.clientHeight==b.clientHeight&&0<b.width&&0<b.height?(this.width=b.width,this.height=b.height):(c=this.computeLayoutViewportSizeFromMediaQueries(a),this.width=c[0],this.height=c[1])}}b.prototype.computeLayoutViewportSizeFromMediaQueries=function(a){var b=this.findMediaValue(a,"width",this.clientWidth,this.clientWidth+128);void 0===b&&(b=this.tryToGet(a,"innerWidth"));void 0===b&&(b=this.clientWidth);var c=this.findMediaValue(a,"height",this.clientHeight,this.clientHeight+128);void 0===
c&&(c=this.tryToGet(a,"innerHeight"));void 0===c&&(c=this.clientHeight);return[b,c]};b.prototype.findMediaValue=function(b,c,d,f){if(a.windex.matchMedia){var k=a.windex.matchMedia(b,"(min-"+c+": "+d+"px)");if(null!=k){if(k.matches&&a.windex.matchMedia(b,"(max-"+c+": "+d+"px)").matches)return d;for(;d<=f;)if(k=Math.floor((d+f)/2),a.windex.matchMedia(b,"(min-"+c+": "+k+"px)").matches){if(a.windex.matchMedia(b,"(max-"+c+": "+k+"px)").matches)return k;d=k+1}else f=k-1}}};b.prototype.tryToGet=function(a,
b){try{return a[b]}catch(c){}};return b}();a.getLayoutViewport=f;var c=function(){return function(a,c){this.scale=this.height=this.width=this.pageTop=this.pageLeft=this.offsetTop=this.offsetLeft=0;var d=a.document;if(d.body){var g="BackCompat"==d.compatMode;"pageXOffset"in a?(this.pageLeft=a.pageXOffset,this.pageTop=a.pageYOffset):d.scrollingElement?(this.pageLeft=d.scrollingElement.scrollLeft,this.pageTop=d.scrollingElement.scrollTop):g?(this.pageLeft=d.body.scrollLeft,this.pageTop=d.body.scrollTop):
d.documentElement&&(0<d.documentElement.scrollLeft||0<d.documentElement.scrollTop)?(this.pageLeft=d.documentElement.scrollLeft,this.pageTop=d.documentElement.scrollTop):(this.pageLeft=d.body.scrollLeft||0,this.pageTop=d.body.scrollTop||0);this.offsetLeft=this.pageLeft-c.pageLeft;this.offsetTop=this.pageTop-c.pageTop;try{var f=a.innerWidth,k=a.innerHeight}catch(l){return}0!=f&&0!=k&&(this.scale=c.width/f,1>this.scale&&(this.scale=1),d=c.height-c.clientHeight,this.width=f-(c.width-c.clientWidth)/this.scale,
this.height=k-d/this.scale)}}}();a.getVisualViewport=function(a,d){if("visualViewport"in a)return a.visualViewport;void 0===d&&(d=f(a));return new c(a,d)}})(m||(m={}));(function(a){function l(d,c){if(!d.firstChild)return[d,c];d=d.firstChild;for(var b=0;b<c-1;b++){var e=a.nextSibling(d);if(!e)break;d=e}return[d,0]}function k(d,c,b){var e=a.tagName(d);if(("img"==e||"embed"==e)&&"src"==c||("use"==e||"image"==e)&&"href"==c||"object"==e&&"data"==c)return[[b],!1];var h;return"link"==e&&"href"==c&&(h=d.getAttribute("rel"))&&
-1<h.indexOf("stylesheet")?[[b],!0]:"srcset"!=c||"img"!=e&&"source"!=e?[[],!1]:null!=b.match(/^\s*$/)?[[],!1]:[a.map(b.split(","),function(b){return a.trim(b).split(/\s+/)[0]}),!1]}var f=function(){function d(c,b,d,h,g,f,l){void 0===l&&(l=new a.ResourceUploader(c,b));var m=this;this._queue=b;this._onFrameCreated=g;this._beforeFrameRemoved=f;this._resourceUploader=l;this._curSelection=[];this._scrollTimeouts={};this._initialized=this._uploadResources=this._quirks=!1;this._wnd=c.window;this._doc=this._wnd.document;
this._loc=this._wnd.location;this._hst=this._wnd.history;this._listeners=h.createChild();this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=new a.InputWatcher(function(a){m.addChangeElem(a)},function(b){return!!a.fsid(b)});this._ajaxWatcher=new a.AjaxWatcher(c,b);this._perfWatcher=new a.PerfWatcher(c,b);this._styleSheetWatcher=new a.StyleSheetWatcher(c,b);this._mutWatcher=new a.MutationWatcher(c,d,function(a,b,c){m.visitNode(a,b,c)},function(b){var c=
b.node;if("iframe"==a.tagName(b.node))m._beforeFrameRemoved(b.node);else if("function"==typeof c.getElementsByTagName)for(b=c.getElementsByTagName("iframe"),c=0;c<b.length;c++)m._beforeFrameRemoved(b[c])},function(b,c,d){if(!a.isBlocked(b)&&m._uploadResources)for(d=k(b,c,d),b=d[1],c=0,d=d[0];c<d.length;c++){var e=d[c];0==e.lastIndexOf("blob:",0)&&m._resourceUploader.uploadBlob(e,b)}})}Object.defineProperty(d.prototype,"perfWatcher",{get:function(){return this._perfWatcher},enumerable:!0,configurable:!0});
d.prototype.watchEvents=function(){var c=this;this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._styleSheetWatcher.start();this._listeners.add(this._wnd,"mousemove",!0,function(a){c.addMouseMove(a)});this._listeners.add(this._wnd,"mousedown",!0,function(a){c.addMouseDown(a)});this._listeners.add(this._wnd,"mouseup",!0,function(a){c.addMouseUp(a)});this._listeners.add(this._wnd,"keydown",!0,function(a){c.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){c.addKeyUp(a)});
this._listeners.add(this._wnd,"click",!0,function(a){c.addClick(a)});this._listeners.add(this._wnd,"dblclick",!0,function(a){c.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){c.addFocus(a)});this._listeners.add(this._wnd,"blur",!0,function(a){c.addBlur(a)});this._listeners.add(this._wnd,"change",!0,function(a){c.addChange(a)},!0);this._listeners.add(this._wnd,"touchstart",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHSTART);c.addWindowScrollOrResize()});this._listeners.add(this._wnd,
"touchend",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHEND);c.addWindowScrollOrResize()});this._listeners.add(this._wnd,"touchmove",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHMOVE);c.addWindowScrollOrResize()});this._listeners.add(this._wnd,"touchcancel",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,"play",!0,function(b){c.addPlayPauseEvent(b,a.EVENT_PLAY)});this._listeners.add(this._wnd,"pause",!0,function(b){c.addPlayPauseEvent(b,a.EVENT_PAUSE)});this._listeners.add(this._wnd,
"scroll",!1,function(a){c.addWindowScrollOrResize()});this._listeners.add(this._wnd,"resize",!1,function(a){c.addWindowScrollOrResize()});this._listeners.add(this._wnd,"submit",!1,function(a){c.addFormSubmit(a)});this._listeners.add(this._wnd,"focus",!1,function(a){c.addWindowFocus(a)});this._listeners.add(this._wnd,"blur",!1,function(a){c.addWindowBlur(a)});this._listeners.add(this._wnd,"popstate",!1,function(){c.addNavigate()});this._listeners.add(this._wnd,"selectstart",!0,function(a){c.addSelection()});
this._listeners.add(this._doc,"selectionchange",!0,function(a){c.addSelection()});var b=this._wnd.visualViewport;b?(this._listeners.add(b,"scroll",!0,function(){return c.addWindowScrollOrResize()}),this._listeners.add(b,"resize",!0,function(){return c.addWindowScrollOrResize()})):this._listeners.add(this._wnd,"mousewheel",!0,function(){c.addWindowScrollOrResize()});(this._pushHook=a.activateHook(this._hst,"pushState"))&&this._pushHook.afterSync(function(){return c.addNavigate()});(this._replaceHook=
a.activateHook(this._hst,"replaceState"))&&this._replaceHook.afterSync(function(){return c.addNavigate()});"function"==typeof this._wnd.document.hasFocus&&this._queue.enqueue(this._wnd.document.hasFocus()?a.EVENT_WINDOW_FOCUS:a.EVENT_WINDOW_BLUR,[]);if(a.windex.matchMedia)for(var b=function(b,g,h){var f=a.windex.matchMedia(d._wnd,h);if(!f)return"continue";h=function(){f.matches&&c._queue.enqueue(a.EVENT_MEDIA_QUERY_CHANGE,[b,g])};d._listeners.add(f,"change",!0,h);h()},d=this,h=0,g=[["any-pointer",
"coarse","not screen and (any-pointer: fine)"],["any-pointer","fine","only screen and (any-pointer: fine)"],["any-hover","none","not screen and (any-hover: hover)"],["any-hover","hover","only screen and (any-hover: hover)"]];h<g.length;h++){var f=g[h];b(f[0],f[1],f[2])}this._initialized=!0};d.prototype.initResourceUploading=function(){this._resourceUploader.init();this._uploadResources=!0};d.prototype.onDomLoad=function(){this.addDomLoaded();this.addViewportChange();this._mutWatcher._checkForMissingInsertions(a.uaIsIE)};
d.prototype.onLoad=function(){var a=this;setTimeout(function(){a._perfWatcher.onLoad();a.addLoad();a.addViewportChange()},0)};d.prototype.ajaxWatcher=function(){return this._ajaxWatcher};d.prototype.bundleEvents=function(a){this._inputWatcher.tick();this._perfWatcher.tick(a);this._ajaxWatcher.tick(a);this.addViewportChange();return this._mutWatcher.processMutations()};d.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),
this._replaceHook&&this._replaceHook.disable(),this._perfWatcher.onLoad(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown(),this._ajaxWatcher.disable(),this._queue.shutdown())};d.prototype.recordingIsDetached=function(){return this._mutWatcher.recordingIsDetached()};d.prototype.visitNode=function(c,b,d){var h=this;switch(b.nodeName){case "HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener);this._docElScrollListener=this._listeners.add(b,"scroll",!0,function(a){h.addScroll(a.target)});
break;case "BODY":this.addViewportChange();d.push(function(){h.addSelection()});break;case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(b);break;case "FRAME":case "IFRAME":this._onFrameCreated(b);break;case "VIDEO":case "AUDIO":b.paused||this.addPlayPauseEventById(a.fsid(b),a.EVENT_PLAY);break;case "STYLE":if(!b.sheet)break;var g=a.getDynamicRuleTail(b);void 0!==g&&d.push(function(){h._styleSheetWatcher.snapshot(b,g)})}"number"!=typeof b.scrollLeft||0==b.scrollLeft&&0==b.scrollTop||
this.addScroll(b)};d.prototype.addMouseMove=function(c){c=a.fsid(c.target)?[c.clientX,c.clientY,a.fsid(c.target)]:[c.clientX,c.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,c)};d.prototype.addMouseDown=function(c){this._queue.enqueue(a.EVENT_MOUSEDOWN,[c.clientX,c.clientY])};d.prototype.addMouseUp=function(c){this._queue.enqueue(a.EVENT_MOUSEUP,[c.clientX,c.clientY])};d.prototype.addTouchEvent=function(a,b){if(void 0!==a.changedTouches)for(var d=0;d<a.changedTouches.length;++d){var h=a.changedTouches[d];
isNaN(parseInt(h.identifier))&&(h.identifier=0);this._queue.enqueue(b,[h.identifier,h.clientX,h.clientY])}};d.prototype.addPlayPauseEvent=function(c,b){var d=a.fsid(c.target);d&&this.addPlayPauseEventById(d,b)};d.prototype.addPlayPauseEventById=function(a,b){this._queue.enqueue(b,[a])};d.prototype.addWindowFocus=function(c){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};d.prototype.addWindowBlur=function(c){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};d.prototype.maybeAddValueChange=function(){var a=
this._doc.activeElement;if(a)this._inputWatcher.onChange(a)};d.prototype.addKeyDown=function(c){c=this._doc.activeElement;if(!c||a.fsidIfNotBlocked(c))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYDOWN,[])};d.prototype.addKeyUp=function(c){c=this._doc.activeElement;if(!c||a.fsidIfNotBlocked(c))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[])};d.prototype.addViewportChange=function(){var c=a.fsid(this.getWindowScrollingElement());if(c){var b=a.getLayoutViewport(this._wnd,
this._curLayoutViewport),d=a.getVisualViewport(this._wnd,b);b.hasKnownPosition?(a.sameViewportPos(b,this._curLayoutViewport)||this._queue.enqueue(a.EVENT_SCROLL_LAYOUT,[c,b.pageLeft,b.pageTop]),a.sameVisualViewportOffset(d,this._curVisualViewport)||this._queue.enqueue(a.EVENT_SCROLL_VISUAL_OFFSET,[c,d.offsetLeft,d.offsetTop])):a.sameViewportPos(d,this._curVisualViewport)||this._queue.enqueue(a.EVENT_SCROLL_LAYOUT,[c,d.pageLeft,d.pageTop]);a.sameLayoutViewportSize(b,this._curLayoutViewport)||(b.width==
b.clientWidth&&b.height==b.clientHeight?this._queue.enqueue(a.EVENT_RESIZE_LAYOUT,[b.clientWidth,b.clientHeight]):this._queue.enqueue(a.EVENT_RESIZE_LAYOUT,[b.clientWidth,b.clientHeight,b.width,b.height]));a.sameViewportSize(d,this._curVisualViewport)||this._queue.enqueue(a.EVENT_RESIZE_VISUAL,[d.width,d.height]);this._curLayoutViewport=a.createLayoutViewportLike(b);this._curVisualViewport=a.createVisualViewportLike(d)}};d.prototype.doWorkInScrollTimeout=function(c,b){var d=this;c in this._scrollTimeouts||
(this._scrollTimeouts[c]=b,(new a.RealTimeout(function(){if(c in d._scrollTimeouts){var a=d._scrollTimeouts[c];delete d._scrollTimeouts[c];a()}},a.ScrollSampleInterval)).start())};d.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=[]};d.prototype.getWindowScrollingElement=function(){return this._doc.scrollingElement||this._doc.body||this._doc.documentElement};d.prototype.addWindowScrollOrResize=
function(){var c=this,b=a.fsid(this.getWindowScrollingElement());b&&this.doWorkInScrollTimeout(b,function(){return c.addViewportChange()})};d.prototype.addScroll=function(c){var b=this,d=a.fsid(c);d&&"number"==typeof c.scrollLeft&&this.doWorkInScrollTimeout(d,function(){b._queue.enqueue(a.EVENT_SCROLL_LAYOUT,[d,c.scrollLeft,c.scrollTop])})};d.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};d.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};d.prototype.addNavigate=
function(){var c=this._loc.href;this._currentUrl!=c&&(this._currentUrl=c,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};d.prototype.addClick=function(c){var b=c.target,d=a.fsid(b);if(d){var h=0,g=0,f=0,k=0;b&&b.getBoundingClientRect&&(b=b.getBoundingClientRect(),h=b.left,g=b.top,f=b.width,k=b.height);this._queue.enqueue(a.EVENT_CLICK,[d,c.clientX,c.clientY,h,g,f,k])}};d.prototype.addDblClick=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[c])};d.prototype.addFormSubmit=
function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[c])};d.prototype.addFocus=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_FOCUS,[c])};d.prototype.addBlur=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_BLUR,[c])};d.prototype.addChange=function(a){this._inputWatcher.onChange(a.target)};d.prototype.addChangeElem=function(c){var b=a.fsidIfNotBlocked(c);b&&this._queue.enqueue(a.EVENT_VALUECHANGE,[b,a.valueOfInputishElem(c)])};d.prototype.addSelection=
function(){try{var c=this.selectionArgs()}catch(b){return}for(var d=!1,h=0;4>h;h++)if(this._curSelection[h]!==c[h]){d=!0;break}d&&(this._curSelection=c,this._queue.enqueue(a.EVENT_SELECT,c))};d.prototype.selectionArgs=function(){if(!this._wnd.getSelection)return[];var c=this._wnd.getSelection();if(!c||"None"==c.type)return[];if("Caret"==c.type){var b=a.fsid(c.anchorNode);return b?[b,c.anchorOffset]:[]}if(!c.anchorNode||!c.focusNode)return[];var d=l(c.anchorNode,c.anchorOffset),b=d[0],d=d[1],c=l(c.focusNode,
c.focusOffset),h=c[0],g=c[1],h=(c=Boolean(b.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING))?[b,h]:[h,b],b=h[0],h=h[1],g=c?[d,g]:[g,d],d=g[0],g=g[1];for(a.fsid(b)||(d=0);b&&!a.fsid(b)&&b!=h;)b=a.nextSibling(b)||b.parentNode;for(a.fsid(h)||(g=0);h&&!a.fsid(h)&&h!=b;)h=a.previousSibling(h)||h.parentNode;if(b==h&&d==g)return[];var f=a.fsid(b),k=a.fsid(h);return b&&h&&f&&k?[f,d,k,g,c]:[]};return d}();a.EventWatcher=f;a.getResourceUrls=k})(m||(m={}));(function(a){function l(b){var c=a.fsid(b)+
" ";b.id&&(c+="#"+b.id);return c+="[src="+b.src+"]"}function k(b,c){b&&b.postMessage&&b.postMessage(a.stringify({__fs:c}),"*")}function f(b){try{var c=a.parseJson(b);if("__fs"in c)return c.__fs}catch(d){}return[]}function d(b){b=b.src;var c=location.protocol+"//"+location.host;return!b||"about:blank"==b||a.prefix(b,"javascript:")||a.prefix(b,c)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_GREET_CHILD_FRAME="GreetFrame";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_SHUTDOWN_FRAME=
"ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";a.FS_SET_CONSENT="SetConsent";a.FS_INIT_MOBILE_CMD="InitFrameMobile";a.defaultInjector=function(b,d,e,f){var k=l(b);a.logIfDebug("Injecting into Frame "+k);try{if(b.id==b.name&&c.test(b.id))a.logIfDebug("Blacklisted iframe: "+k);else if(b.src&&"about:blank"!=b.src&&0>b.src.indexOf("javascript:")&&b.src!=b.contentWindow.location.href&&"loading"==b.contentDocument.readyState)a.logIfDebug("Frame not yet loaded: "+k);else if(b.contentWindow[a.Namespace(b.contentWindow)])a.logIfDebug("FS already defined in Frame contentWindow: "+
k+". Ignoring.");else{var m=b.contentWindow,s=b.contentDocument;m._fs_org=d;m._fs_host=e;m._fs_debug=a.isDebug();m._fs_run_in_iframe=!0;var q=s.createElement("script");q.async=!0;q.src=f+"//"+e+"/s/fs.js";"testdrive"==d&&(q.src+="?allowMoo=true");s.head.appendChild(q)}}catch(t){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};var c=/^fb\d{18}$/,b;(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(b=a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState=
{}));var e=function(){function c(d,e,f,h){var k=this;this._ctx=d;this._injector=h;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=new a.DomListeners;this._getCurrentSessionEnabled=b.NoInfoYet;this._resourceUploadingEnabled=!1;this._tickerTasks=[];this._watcher=new a.Watcher;this._transport=f(d,function(){k.shutdown()});this._queue=new a.EventQueue(d,this._transport,function(a){a=k._eventWatcher.bundleEvents(a);for(var b=void 0;b=k._tickerTasks.pop();)b();return a},e);this._eventWatcher=
new a.EventWatcher(d,this._queue,this._watcher,this._listeners,function(a){k.onFrameCreated(a)},function(a){k.beforeFrameRemoved(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,d.window,this._listeners);this._protocol=d.options.protocol;this._host=d.options.host;this._orgId=d.options.orgId;this._wnd=d.window}c.prototype.start=function(b,c){var d=this;this._onFullyStarted=c;this.addDefaultWatches();"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(a){d.onUnload("pagehide")}):
this._listeners.add(this._wnd,"unload",!1,function(a){d.onUnload("unload")});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&d.postMessageReceived(a.source,f(a.data))});(this._docCloseHook=a.activateHook(this._wnd.Document?this._wnd.Document.prototype:this._wnd.document,"close"))&&this._docCloseHook.afterAsync(function(){d._listeners.refresh()})};c.prototype.queue=function(){return this._queue};c.prototype.eventWatcher=function(){return this._eventWatcher};c.prototype.console=
function(){return this._consoleWatcher};c.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};c.prototype.onLoad=function(){this._eventWatcher.onLoad()};c.prototype.shutdown=function(){this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this._docCloseHook&&this._docCloseHook.disable();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};c.prototype.tellAllFramesTo=function(a){for(var b=0;b<this._iFrames.length;b++)k(this._iFrames[b].contentWindow,a)};c.prototype.getCurrentSessionURL=
function(c){var d=this._getCurrentSessionEnabled;if(d==b.NoInfoYet)return null;var e;e=this._host;e=a.isLocalhost(a.domainFromHost(e))?e:0==e.indexOf("www.")?"app."+e.slice(4):"app."+e;if(d==b.Disabled)return this._protocol+"//"+e+"/opt/upgrade";d=this.getCurrentSession();if(!d)return null;c&&(d+=":"+this._ctx.time.wallTime());return this._protocol+"//"+e+"/ui/"+this._ctx.options.orgId+"/session/"+encodeURIComponent(d)};c.prototype.getCurrentSession=function(){var a=this._getCurrentSessionEnabled;
return a!=b.NoInfoYet&&a!=b.Disabled&&this._userId?this._userId+":"+this._sessionId:null};c.prototype.setConsent=function(b){this._watcher.setConsent(b);this.tellAllFramesTo([a.FS_SET_CONSENT,b])};c.prototype.onUnload=function(b){this._queue.addUnload(b);a.Scheduler.stopAll()};c.prototype.handleResponse=function(a){this._pageRsp=a;this._userId=a.UserIntId;this._sessionId=a.SessionIntId;this._pageId=a.PageIntId;this._serverPageStart=a.PageStart;this._getCurrentSessionEnabled=a.GetCurrentSessionEnabled?
b.Enabled:b.Disabled;a.ResourceUploadingEnabled&&this.enableResourceUploading();a.AjaxWatcherEnabled&&this.enableAjaxWatcher();a.ConsoleWatcherEnabled&&this.enableConsoleWatcher();if(a.Blocks)for(var c=0;c<a.Blocks.length;++c)this._watcher.addRule(a.Blocks[c]);if(a.Watches)for(c=0;c<a.Watches.length;++c)this._watcher.addRule(a.Watches[c]);a.AjaxWatcherEnabled&&a.AjaxWatches&&this._eventWatcher.ajaxWatcher().setWatches(a.AjaxWatches);this._watcher.setConsent(!!a.Consented)};c.prototype.addDefaultWatches=
function(){for(var b=0,c='object:not([type^="image/"]) embed:not([type^="image/"]) canvas noscript .fs-block .fs-hide'.split(" ");b<c.length;b++)this._watcher.addRule({Selector:c[b],Kind:a.WatchKindBlocked})};c.prototype.fullyStarted=function(){this._onFullyStarted()};c.prototype.enableResourceUploading=function(){this._resourceUploadingEnabled=!0;this._eventWatcher.initResourceUploading()};c.prototype.enableAjaxWatcher=function(){this.eventWatcher().ajaxWatcher().enable()};c.prototype.enableConsoleWatcher=
function(){this.console().enable()};c.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();this._pendingChildFrameIdInits=[]}};c.prototype.onFrameCreated=function(b){var c=this;if(a.fsid(b)){this._iFrames.push(b);var e=d(b),f=!1;try{f=!!b.contentWindow[a.Namespace(b.contentWindow)]}catch(h){f=!0}(!e||f)&&b.contentWindow&&b.contentWindow.postMessage?(a.logIfDebug("Cross-origin iframe "+
l(b)),k(b.contentWindow,[a.FS_GREET_CHILD_FRAME])):e?(a.logIfDebug("Attempting to setup Frame "+l(b)),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",function(d){try{c._tickerTasks.push(function(){a.logIfDebug("onload for frame "+l(b));c._injector(b,c._orgId,c._host,c._protocol)})}catch(e){a.sendToBugsnag(e,"error")}})):a.logIfDebug("Frame Doesn't need injecting. Probably cross domain "+l(b))}else a.logIfDebug("fsid missing or invalid for iFrame "+l(b))};c.prototype.beforeFrameRemoved=
function(a){for(var b=0;b<this._iFrames.length;b++)if(a==this._iFrames[b]){this._iFrames.splice(b,1);break}};c.prototype.postMessageReceived=function(b,c){switch(c[0]){case a.FS_IFRAME_EVENTS:var d=c[1];0<d.length&&this._transport.enqueueEvents(d);break;case a.FS_REQUEST_FRAME_ID:d=this.iFrameWndToFsId(b);b&&d?(a.logIfDebug("Responding to FID request for frame "+d),this.sendFrameIdToInnerFrame(b,d)):a.logIfDebug("No FrameId found. Hoping to send one later.");break;case a.FS_SET_CONSENT:this.setConsent(c[1])}};
c.prototype.sendFrameIdToInnerFrame=function(b,c){var d=this,e=function(){var e=[];0!=d._frameId&&(e=d._parentIds?d._parentIds.concat(d._frameId):[d._frameId]);var f=d._ctx.time.startTime();k(b,[a.FS_SET_FRAME_ID_CMD,c,e,f,d._protocol,d._host,d._orgId,d._pageRsp])};null==this._frameId?this._pendingChildFrameIdInits.push(e):e()};c.prototype.iFrameWndToFsId=function(b){for(var c=0;c<this._iFrames.length;c++)if(this._iFrames[c].contentWindow==b)return a.fsid(this._iFrames[c]);a.logIfDebug("Unable to locate frame for window");
return NaN};return c}();a.AbstractRecorder=e;a.parsePostMessageData=f})(m||(m={}));(function(a){function l(f,d){return new a.HttpEventTransport(f,d)}var k=function(f){function d(c,b,d,h,g){void 0===b&&(b=a.RealTicker);void 0===d&&(d=new a.XHRPoster);void 0===h&&(h=l);void 0===g&&(g=a.defaultInjector);var k=f.call(this,c,b,h,g)||this;k._poster=d;k._domLoaded=!1;k._recordingDisabled=!1;k._integrationScriptFetched=!1;k._doc=k._wnd.document;k._frameId=0;k._identity=c.recording.identity;k._getCurrentSessionEnabled=
a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(k._wnd,function(a){k._eventWatcher.shutdown();a&&(a=k._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",k._embedToken)});return k}A(d,f);d.prototype.onDomLoad=function(){var a=this;f.prototype.onDomLoad.call(this);this._domLoaded=!0;this.injectIntegrationScript(function(){a.fireFsReady()})};d.prototype.start=function(c,b,d){var h=this;f.prototype.start.call(this,c,b);b=a._fs_replay_flags(this._wnd);var g=a.getDocumentClientArea(this._doc),
k=g[0],g=g[1],l=a.tryGetScreenDims(this._wnd),m=l[0],l=l[1],r="";c||(r=this._identity.userId());c={OrgId:this._orgId,UserId:r,Url:location.href,Base:a.baseUri(this._wnd),Width:k,Height:g,ScreenWidth:m,ScreenHeight:l,Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};d&&(c.AppId=d);b&&(c.ReplayFlags=b);this._poster.post(this._protocol,a.gceHost(this._host),"/rec/page",a.stringify(c),function(b){var c;try{c=a.parseJson(b)}catch(d){h.disableBecauseRecPageSaidSo();
return}h.handleResponse(c);h.handleIdentity(c.CookieDomain,c.UserIntId,c.SessionIntId,c.PageIntId,c.EmbedToken);h.handleIntegrationScript(c.IntegrationScript);h._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(h._wnd),a.doctypeString(h._doc)]);h._queue.startPipeline(c.PageIntId,c.PageStart);h.fullyStarted()},function(a){h.disableBecauseRecPageSaidSo()})};d.prototype.handleIntegrationScript=function(a){var b=this;this._integrationScriptFetched=!0;this._integrationScript=a;this.injectIntegrationScript(function(){b.fireFsReady()})};
d.prototype.handleIdentity=function(c,b,d,f,g){var k=this._identity;k.setIds(this._wnd,c,b,d);this._embedToken=g;a.logIfDebug("/User,"+k.userId()+"/Session,"+k.sessionId()+"/Page,"+f)};d.prototype.injectIntegrationScript=function(c){if(this._domLoaded&&this._integrationScriptFetched)if(this._integrationScript){var b=this._doc.createElement("script");a._fs_csp(this._wnd)?(b.addEventListener("load",c),b.addEventListener("error",c),b.async=!0,b.src=this._protocol+"//"+this._host+"/rec/integrations?OrgId="+
this._orgId,this._doc.head.appendChild(b)):(b.text=this._integrationScript,this._doc.head.appendChild(b),c())}else c()};d.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown();a.logIfDebug("Disabling FS.");this._recordingDisabled=!0;this.fireFsReady()};d.prototype.fireFsReady=function(){var c=a._fs_ready(this._wnd);if(c)try{this._recordingDisabled?c(!0):c()}catch(b){a.logIfDebug("exception in _fs_ready(): "+b)}};return d}(a.AbstractRecorder);a.TopRecorder=k})(m||(m={}));(function(a){function l(f,
d){return new a.PostMessageEventTransport(f.window)}a.makeFrameTransport=l;var k=function(f){function d(c,b,d,h,g){void 0===b&&(b=a.RealTicker);void 0===d&&(d=new a.PostMessagePoster);void 0===h&&(h=l);void 0===g&&(g=a.defaultInjector);c=f.call(this,c,b,h,g)||this;c._messagePoster=d;return c}A(d,f);d.prototype.start=function(c,b){var d=this;f.prototype.start.call(this,c,b);this.sendRequestForFrameId();this._listeners.add(this._wnd,"load",!1,function(){d._eventWatcher.recordingIsDetached()&&(a.logIfDebug("Recording wrong document. Restarting recording in iframe."),
d._ctx.recording.splitPage())})};d.prototype.postMessageReceived=function(c,b){f.prototype.postMessageReceived.call(this,c,b);switch(b[0]){case a.FS_GREET_CHILD_FRAME:this.sendRequestForFrameId();break;case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(b[1],b[2],b[3],b[4],b[5],b[6],b[7])}catch(d){a.logIfDebug("Failed to parse frameId from message: "+a.stringify(b))}break;case a.FS_INIT_MOBILE_CMD:try{var h=JSON.parse(b[1]),g=h.StartTime;if(2<b.length){var k=b[2];k.hasOwnProperty("ProtocolVersion")&&
20180723<=k.ProtocolVersion&&k.hasOwnProperty("OuterStartTime")&&(g=k.OuterStartTime)}this.setFrameIdFromOutside(-1,[],g,"https",h.Host,h.OrgId,h.PageResponse)}catch(l){a.logIfDebug("Failed to initialize mobile web recording from message: "+a.stringify(b))}}};d.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):this._wnd.parent?(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),
this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,[])):a.logIfDebug("Orphaned window. Location href = "+location.href))};d.prototype.setFrameIdFromOutside=function(c,b,d,f,g,k,l){c?this._frameId?this._frameId!=c?(a.logIfDebug("Updating frame id from "+this._frameId+" to "+c),this._ctx.recording.splitPage()):a.logIfDebug("frame Id is already set to "+this._frameId):(a.logIfDebug("FrameId received within frame "+location.href+": "+c),this._protocol=f,this._host=g,this._orgId=k,
this._frameId=c,this._parentIds=b,this.handleResponse(l),this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd),a.doctypeString(this._wnd.document)]),this._queue.rebaseIframe(d),this._ctx.time.setStartTime(d),this._queue.startPipeline(this._pageId,l.PageStart,c,b),this.flushPendingChildFrameInits(),this.fullyStarted()):a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)};return d}(a.AbstractRecorder);a.InnerRecorder=k})(m||(m={}));(function(a){function l(d){if(d==
top||a._fs_is_outer_script(d)||a._fs_run_in_iframe(d)||a._fs_transport(d))return!0;try{return d.parent.document,l(d.parent)}catch(c){return!1}}var k=function(){function d(){}d.prototype.createTopRecorder=function(c){return new a.TopRecorder(c)};d.prototype.createInnerRecorder=function(c){return new a.InnerRecorder(c)};return d}();a.DefaultRecorderMaker=k;var f=function(){function d(a,b){void 0===a&&(a=window);void 0===b&&(b=new k);this.wnd=a;this.recMaker=b;this.protocol="https:";this.waitingOnStart=
this.domDoneLoaded=!1;this.reidentifyCount=0}d.prototype.init=function(){a.isLoaded(this.wnd)||(a.setLoaded(this.wnd,a.Namespace(this.wnd)),a.initWindex(this.wnd),this.initApi(),this.start())};d.prototype.getCurrentSessionURL=function(a){return this.recorder?this.recorder.getCurrentSessionURL(a):null};d.prototype.getCurrentSession=function(){return this.recorder?this.recorder.getCurrentSession():null};d.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()};d.prototype.disableConsole=
function(){this.recorder&&this.recorder.console().disable()};d.prototype.log=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];this.recorder&&("log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(b.unshift(a),a="log"),this.recorder.console().addLog(a,b))};d.prototype.shutdown=function(){!this.recorder||this.deferredStart?a.logIfDebug("Recording already shut down."):(this.recorder.shutdown(),this.recorder=null)};d.prototype.restart=function(){this.deferredStart?(this.deferredStart(),
this.deferredStart=null):this.recorder?a.logIfDebug("Recording already started."):this.recorder=this.createRecorder(!0)};d.prototype.splitPage=function(c){return v(this,void 0,void 0,function(){return z(this,function(b){switch(b.label){case 0:if(c&&null==this.identity)return a.logIfDebug("Can't re-identify from an iframe"),[2];if(this.waitingOnStart)return this.splitPending=[c],[2];this.shutdown();return[4,a.wait(0)];case 1:return b.sent(),[4,a.wait(0)];case 2:return b.sent(),c&&this.identity&&this.identity.clear(),
this.restart(),[2]}})})};d.prototype._api=function(c,b){if(this.inFrame())a.logIfDebug("API calls may only be made from the top-most frame");else if(this.recorder){var d=this.vars.api(c,b),f=d.events,g=d.consent;if(d.reidentify){if(8>this.reidentifyCount){this.reidentifyCount++;a.FS_q_push(this.wnd,[c,b]);this.splitPage(!0);return}a.logIfDebug("reidentified too many times; giving up")}void 0!==g&&this.recorder.setConsent(g);for(d=0;d<f.length;d++)this.recorder.queue().enqueue(f[d].Kind,f[d].Args)}else a.FS_q_push(this.wnd,
[c,b])};d.prototype._cookies=function(){if(this.identity)return this.identity.cookies();a.logIfDebug("Error in FS integration: Can't get cookies from inside an iframe");return null};d.prototype._setCookie=function(c,b){this.identity?this.identity.setCookie(c,b):a.logIfDebug("Error in FS integration: Can't set cookies from inside an iframe")};d.prototype.initApi=function(){var c=this.wnd[a.Namespace(this.wnd)];c.getCurrentSessionURL=a.$entry(this.getCurrentSessionURL,this);c.getCurrentSession=a.$entry(this.getCurrentSession,
this);c.enableConsole=a.$entry(this.enableConsole,this);c.disableConsole=a.$entry(this.disableConsole,this);c.log=a.$entry(this.log,this);c.shutdown=a.$entry(this.shutdown,this);c.restart=a.$entry(this.restart,this);c._api=a.$entry(this._api,this);c._cookies=a.$entry(this._cookies,this);c._setCookie=a.$entry(this._setCookie,this)};d.prototype.start=function(){var c=this;a.initDebug(this.wnd);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");this.host=a._fs_host(this.wnd);
this.orgId=a._fs_org(this.wnd);this.host?this.orgId?(a.logIfDebug("host: "+this.host),a.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol="http:"),this.inFrame()||(this.identity=new a.Identity(this.wnd.document),this.vars=new a.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.canRecord(this.orgId)?(this.recorder=this.createRecorder(),this.recorder.eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",function(b){if("string"==
typeof b.data)switch(a.parsePostMessageData(b.data)[0]){case a.FS_SHUTDOWN_FRAME:c.shutdown();break;case a.FS_RESTART_FRAME:c.restart()}})):this.hailMary()):a.logIfDebug("Missing global _fs_org. Recording disabled."):a.logIfDebug("Missing global _fs_host. Recording disabled.")};d.prototype._context=function(){var c=this;return{window:this.wnd,time:new a.Timekeeper,options:{host:this.host,protocol:this.protocol,orgId:this.orgId},recording:{inFrame:this.inFrame(),vars:this.vars,identity:this.identity,
splitPage:function(a){return c.splitPage(a)}}}};d.prototype.createRecorder=function(c){var b=this,d=this._context(),f;if(this.inFrame())f=this.recMaker.createInnerRecorder(d);else{f=this.recMaker.createTopRecorder(d);for(var g=this.drainApiQueue(a.FS_q_drain(this.wnd)),k=g.reidentify,l=g.appId,m=g.defer,d=g.consent,r=0,g=g.events;r<g.length;r++){var s=g[r];f.queue().enqueue(s.Kind,s.Args)}void 0!==d&&f.setConsent(d)}this.waitingOnStart=!0;d=function(){f.start(!!k,function(){b.waitingOnStart=!1;c&&
f.tellAllFramesTo([a.FS_RESTART_FRAME]);b.splitPending&&(b.splitPage.apply(b,b.splitPending),b.splitPending=null)},l);c&&f.eventWatcher().watchEvents()};m?this.deferredStart=d:d();return f};d.prototype.drainApiQueue=function(c){if(!c)return{events:[]};for(var b=[],d,f,g,k,l=0;l<c.length;l++){var m=c[l];"user"==m[0]&&(m[1]&&m[1].uid)&&(d=a.transformValidateAppId(m[1].uid)[0]);var r=this.vars.api(m[0],m[1]),m=r.events,s=r.reidentify,q=r.recStatus,r=r.consent;q&&(k="shutdown"===q);s&&(b=[],f=!0);void 0!==
r&&(g=r);b.push.apply(b,m)}return{events:b,reidentify:f,consent:g,appId:d,defer:k}};d.prototype.inFrame=function(){if("boolean"==typeof this._inFrame)return this._inFrame;var c=a._fs_transport(this.wnd);a._fs_is_outer_script(this.wnd)?this._inFrame=!1:this.wnd!=top?this._inFrame=!0:c?c.init&&c.init(this.orgId)&&(this._inFrame=!0):this._inFrame=!1;return this._inFrame};d.prototype.canRecord=function(c){return this.wnd.MutationEvent&&this.wnd.postMessage&&a._native_matchesSelector?l(this.wnd)?!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),
!1):(a.logIfDebug("missing required browser features"),!1)};d.prototype.hailMary=function(){var c=this;if(this.identity){var b=a._fs_replay_flags(this.wnd);a.logIfDebug("Unable to record playback stream.");var d=document.createElement("script");this.wnd.__fs_startResponse=function(a){a&&c.identity.setIds(c.wnd,a.CookieDomain,a.UserIntId,a.SessionIntId);document.head.removeChild(d)};var f=a.getDocumentClientArea(this.wnd.document),g=f[0],f=f[1],k=a.tryGetScreenDims(this.wnd),l=k[0],k=k[1];d.src="//"+
a.gceHost(this.host)+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(this.wnd))+"&Width="+g+"&Height="+f+"&ScreenWidth="+l+"&ScreenHeight="+k+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&CompiledTimestamp="+a.CompiledTimestamp+"&Fallback=true"+(b?"&ReplayFlags="+b:"");document.head.appendChild(d)}};d.prototype.hookLoadEvents=function(){var a=
this,b=function(){a.domDoneLoaded||(a.domDoneLoaded=!0,a.recorder&&a.recorder.onDomLoad())},d=!1,f=function(){d||(d=!0,a.recorder&&a.recorder.onLoad())};switch(document.readyState){case "interactive":document.attachEvent||b();break;case "complete":b(),f()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",function(a){b()});d||this.wnd.addEventListener("load",function(a){b();f()})};return d}();a.Conductor=f})(m||(m={}));try{(new m.Conductor).init()}catch(S){m.sendToBugsnag(S,"error"),
m._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
